"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[47412],{17314:(e,t,i)=>{i.d(t,{Z:()=>d});var a,n,l=i(813653),r=i(861470),s=0,o=0;let d=function(e,t,i){var d=t&&i||0,u=t||Array(16),c=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:n;if(null==c||null==p){var m=e.random||(e.rng||l.Z)();null==c&&(c=a=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==p&&(p=n=(m[6]<<8|m[7])&16383)}var g=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:o+1,_=g-s+(h-o)/1e4;if(_<0&&void 0===e.clockseq&&(p=p+1&16383),(_<0||g>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");s=g,o=h,n=p;var y=((268435455&(g+=122192928e5))*1e4+h)%4294967296;u[d++]=y>>>24&255,u[d++]=y>>>16&255,u[d++]=y>>>8&255,u[d++]=255&y;var f=g/4294967296*1e4&268435455;u[d++]=f>>>8&255,u[d++]=255&f,u[d++]=f>>>24&15|16,u[d++]=f>>>16&255,u[d++]=p>>>8|128,u[d++]=255&p;for(var v=0;v<6;++v)u[d+v]=c[v];return t||(0,r.Z)(u)}},894595:(e,t,i)=>{var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="610a35d46510240eb58e262c1909310c";let l=n},340359:(e,t,i)=>{var a,n,l;i.r(t),i.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},l,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="833cd5d58bc1ac105444aa923e882675";let s=r},276971:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"},{args:null,kind:"FragmentSpread",name:"StelaCutouts_pin"}],type:"Pin",abstractKey:null};a.hash="4c094b2f5fd711f63313c83eac8ecfc5";let n=a},643229:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGrid_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};a.hash="0e18466f59f891e9ea12d1c056d9f627";let n=a},106398:(e,t,i)=>{var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FollowButton_pin",selections:[{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:a,storageKey:null}],type:"Pin",abstractKey:null};n.hash="cabaa35ed7d59dee006897bf3ef32e3d";let l=n},200932:(e,t,i)=>{var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:a,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};n.hash="12f77507a9fdec344b44b7e659fa5ac1";let l=n},239e3:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};a.hash="d3343cbed0df46adae9a256f0fc6f167";let n=a},194081:(e,t,i)=>{var a,n,l,r,s;i.r(t),i.d(t,{default:()=>d});let o={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:n=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,{args:null,kind:"FragmentSpread",name:"RelatedProductsPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[l],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[l,s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"03eb828de8d2e9a4c8e1d3c0a94f7ea7fe306fd1717cc09995da1518d6549cf1",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}};o.hash="0a96a1ee859bcb7fedbf477060a5beb3";let d=o;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(o.default||o)},112649:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPage_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchPageWithPinData_pin"}],type:"Pin",abstractKey:null};a.hash="91d05676e413b7b47653c2f8fa609093";let n=a},141027:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="395dd0c72ba79e629fa9cf482a4b73d6";let n=a},754980:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutout_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};a.hash="0b66eea622c037ef845cce3aa4cd2d46";let n=a},734501:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutouts_pin",selections:[{args:null,kind:"FragmentSpread",name:"StelaCutout_pin"}],type:"Pin",abstractKey:null};a.hash="aa969bf48facf77e13c5fc82deaa909e";let n=a},343015:(e,t,i)=>{var a,n,l,r,s,o,d,u,c,p,m,g,h,_,y,f,v,x,b,S;i.r(t),i.d(t,{default:()=>k});let w=(a=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],n=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},c=[o={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],p=[u,d,o],m={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},h=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],y={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:_=[l],storageKey:null},{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[l,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},r,{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},s],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"orig")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"736x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},r,s,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[m,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[g,{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[m,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:h,storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:h,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[l,m,y,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[m,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:_,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[m,y,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[f={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},x,l],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},g,{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:S=[d],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:S,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:S,storageKey:'images(spec:"170x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:S,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[b,m,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},d,x],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[b,v,{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},f,x],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},x],storageKey:null},x],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"6cdf0568ef4791ef0418ee1fe441fb842acf50d89807fd6a9eb18334133da65a",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});w.hash="3904efe87290878b8559da8f51b4bd16";let k=w;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(w.default||w)},790602:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPage_pin"}],type:"Pin",abstractKey:null};a.hash="01839fc3bcd9cdaf206873364167d157";let n=a},572621:(e,t,i)=>{var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"orig")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardBody_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};n.hash="80808af4cef3901a9ce9bec48f33c09b";let l=n},708537:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchProductFeedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};a.hash="b69967adff40ae068eb5d3aad8f106f3";let n=a},977546:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};a.hash="9d37ca13b584492c1fba958c00317b73";let n=a},5915:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGrid_pin"}],type:"Pin",abstractKey:null};a.hash="ecc8a2a34b852db42ada7b81f966ef5a";let n=a},196227:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchProductFeedResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchUnifiedResourceContainer_pin"}],type:"Pin",abstractKey:null};a.hash="559409b5cdf594ceadec1100a8e980f8";let n=a},270886:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchUnifiedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};a.hash="7074039637fc6e2b8dd0bdad128d63c8";let n=a},632349:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};a.hash="120ad104e33b94ab10be1098dc10d74b";let n=a},222267:(e,t,i)=>{var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};n.hash="3d7a6d04f923d00acfb2887f852aea16";let l=n},899854:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetViewLog_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};a.hash="4d2dba5ab4f3957f62edf10d66e5a060";let n=a},853708:(e,t,i)=>{var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:a=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:a,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};n.hash="01a93671cde480baa2cfd8b781589acd";let l=n},890030:(e,t,i)=>{var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};n.hash="b7ea441f2c20a68b323088ebe3847835";let l=n},892254:(e,t,i)=>{i.d(t,{$:()=>p,r:()=>m});var a=i(667294),n=i(342513),l=i(321329),r=i(172203),s=i(340523),o=i(5859),d=i(757640),u=i(785893);let{Provider:c,useHook:p}=(0,n.Z)("PinRep");function m({children:e}){let{isAuthenticated:t}=(0,o.B)(),{checkExperiment:i}=(0,s.F)(),{experience:n}=(0,r.Z)(1000069),[p,m]=(0,a.useState)(!0),[g,h]=(0,a.useState)(!1),[_,y]=(0,a.useState)(!1),[f,v]=(0,a.useState)(null),[x,b]=(0,a.useState)(null),S=(0,l.Z)(1000069),{anyEnabled:w}=i("ap_bmi_custom_activation_nux_revamp_mweb_v2",{dangerouslySkipActivation:!0}),k=(0,d.Z)(t&&w?{name:"UserStateResource",options:{state:"QUICK_SAVES_BOARD_ID"}}:null).data;(0,a.useEffect)(()=>{if(!t){m(!1);return}n&&(!n||n?.experience_id===500417&&n?.display_data.hide_footer)?S.viewExperience(1000069,500417):m(!1),h(!0)},[n]);let P=(0,a.useMemo)(()=>({hasMetSaveRequirementOnUseCaseFeed:_,hasSimplifiedPinGridExpLoaded:g,hidePinRepFooter:p,quickSaveBoardId:k,setHasMetSaveRequirementOnUseCaseFeed:y,setUseCaseFeedOriginalPinId:b,setUseCaseFeedRepinId:v,useCaseFeedOriginalPinId:x,useCaseFeedRepinId:f}),[_,g,p,k,y,b,v,x,f]);return(0,u.jsx)(c,{value:P,children:e})}},306320:(e,t,i)=>{i.d(t,{$:()=>a,v:()=>n});let a=50,n={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},160408:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(667294),n=i(883119),l=i(737684),r=i(140017),s=i(340523),o=i(5859),d=i(923368),u=i(785893);function c({collapsed:e,displayViewState:t,forceTappableHeader:i,headerHeight:c,headerPaddingRight:p,headerPreview:m,heading:g,onClick:h,showArrow:_,surface:y}){let f=(0,r.ZP)(),{checkExperiment:v}=(0,s.F)(),{isAuthenticated:x}=(0,o.B)(),b=x?v("auth_closeup_redesign").anyEnabled:v("unauth_closeup_redesign").anyEnabled,{closeupWithinMasonryEnabled:S,isCloseupRelatedPinsAboveTheFoldEnabled:w,peekCloseupEnabled:k,viewportSize:P}=(0,d.x4)(),T=(0,l.rt)({peekCloseupEnabled:k,viewportSize:P,surface:y});return(0,u.jsx)(a.Fragment,{children:i||null!==t?(0,u.jsx)(n.iP,{disabled:!_,onTap:h,children:(0,u.jsx)(n.xu,{marginBottom:!e&&k?4:void 0,children:(0,u.jsxs)(n.kC,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",height:c,justifyContent:"between",children:[(0,u.jsx)(n.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:b||S?"300":"400",children:g}),(0,u.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingRight:p}},direction:"row",display:"flex",children:[e&&m,(_||S)&&(w?(0,u.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transform:e?"rotate(0deg)":"rotate(180deg)",transition:w?"all 600ms cubic-bezier(.25,1,.5,1)":void 0}},opacity:_?1:0,children:(0,u.jsx)(n.hU,{accessibilityLabel:f._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),dataTestId:"collapse-button",disabled:!_,icon:"arrow-down",size:"sm"})}):(0,u.jsx)(n.xu,{alignItems:"center","data-test-id":"collapse-button",display:"flex",justifyContent:"center",marginStart:m?-1:0,width:w?32:48,children:(0,u.jsx)(n.JO,{accessibilityLabel:f._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),color:"default",icon:e?"arrow-down":"arrow-up"})}))]})]})})}):(()=>{let e=(0,u.jsx)(n.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:T?"300":"400",children:g});return T?(0,u.jsx)(n.xu,{marginBottom:4,children:e}):e})()})}},230556:(e,t,i)=>{i.d(t,{n:()=>a});let a="300"},867013:(e,t,i)=>{i.d(t,{n:()=>a});let a=20},735382:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(624797);function n(e){let t=(0,a.mB)(e.search),i=parseInt(t.x??"",10),n=parseInt(t.y??"",10),l=parseInt(t.w??"",10),r=parseInt(t.h??"",10);return!function(...e){return e.every(Number.isInteger)}(i,n,l,r)?null:{x:i,y:n,w:l,h:r}}},430062:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(667294),n=i(883119),l=i(214877),r=i(140017),s=i(493538),o=i(71328),d=i(676554),u=i(785893);function c({alignStart:e,commerceData:t,isFilterOpened:i,isProductFeed:c,searchId:p,viewParameter:m,viewType:g,visualSearchFlashlightUnifiedResource:h}){let _=(0,r.ZP)(),{logContextEvent:y}=(0,l.v)(),[f,v]=(0,a.useState)(),[x,b]=(0,a.useState)(!1),S=(0,a.useRef)(null),w=(0,a.useRef)(null),k=(0,o.Z)(()=>{S.current&&v(S.current.getBoundingClientRect().y)},100);(0,a.useEffect)(()=>{w.current?.handleResize()},[i]),(0,a.useEffect)(()=>{if(!x)return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)}),(0,a.useEffect)(()=>{let e=window?.innerHeight||document.body?.clientHeight;!x&&f<e&&(b(!0),y({event_type:110,view_type:g,view_parameter:m}))},[f,y,x,b,g,m]);let{data:P,isFetching:T,fetchMore:E,isAtEnd:I}=h,F=(P?.results||[]).filter(e=>"pin"===e.type);return(0,u.jsxs)(n.xu,{"data-test-id":"visual-search-feed",children:[(0,u.jsx)(n.xu,{ref:S,children:(0,u.jsx)(s.Z,{isAtEndOfFeed:I,itemCount:(F||[]).length,children:(0,u.jsx)(n.Rk,{ref:w,align:e?"start":"center",items:F||[],loadItems:E,minCols:1,renderItem:({data:e,itemIdx:i})=>"pin"===e.type?(0,u.jsx)(d.ZP,{authDesktopSurface:c?"ShoppingDynamicHeightGrid":"SearchItem",auxData:{commerce_data:t},componentType:0,duploQueryRef:null,pin:e,pinId:e.id,slotIndex:i,viewData:{search_identifier:p},viewParameter:m,viewType:g}):null,scrollContainer:()=>window})})}),(0,u.jsx)(n.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,u.jsx)(n.$j,{accessibilityLabel:_._('Loading visual search results', 'visualSearch.spinner.label', 'Accessibility label for spinner when loading the visual search results'),show:T})})]})}},706308:(e,t,i)=>{i.d(t,{Z:()=>a});function a(e){let{category_filters:t,domain_filters:i,price_filters:a}=e||{};return!!t||!!i||!!a}},8760:(e,t,i)=>{i.d(t,{Z:()=>d});var a=i(667294),n=i(706308),l=i(785049),r=i(256683),s=i(757640),o=i(325362);function d({resourceOptions:e,setFlashlightSearchId:t}){let[i,d]=(0,a.useState)(),[u,c]=(0,a.useState)(""),[p,m]=(0,a.useState)(),{cachedOneBarModules:g,setCachedOneBarModules:h}=(0,l.t)(),_=(0,s.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,a.useEffect)(()=>{let{auxData:e}=_,t=e?.metadata?.one_bar_modules;t&&!g&&h((0,r.Z)(o.Z,!0)(t))},[_,h,g]),(0,a.useEffect)(()=>{let{data:e}=_,i=e?.search_identifier;i&&(t?t(i):c(i)),d(e)},[t,_]),(0,a.useEffect)(()=>{let{data:e}=_,t=e?.search_identifier,a=i?.search_identifier;!e||t&&a&&t===a||(0,n.Z)(i)||!(0,n.Z)(e)||m({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[p,i,_]),{filters:p,oneBarModules:g,searchId:u,setSearchId:c,visualSearchFlashlightUnifiedResource:_}}},82205:(e,t,i)=>{i.d(t,{Z:()=>_});var a=i(667294),n=i(883119),l=i(785893);function r({isTopRow:e,image:t}){return(0,l.jsxs)(n.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[(0,l.jsx)(n.Ee,{alt:t.alt||"",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""}),!!t.price&&(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:t.price})]})}var s=i(214877),o=i(205841),d=i(666472),u=i(223785),c=i(862249),p=i(97538),m=i(535839);let g={container:{borderRadius:`${u.Oc}px ${u.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},h=({images:e,firstImageIndex:t})=>{let i=t+1,a=t+2;return(0,l.jsxs)(n.xu,{overflow:"hidden",rounding:4,children:[(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:g.content},children:e.at(t)?(0,l.jsx)(r,{image:e[t],isTopRow:!0}):null}),e.length>a?(0,l.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,l.jsx)(r,{image:e[i]}),(0,l.jsx)(r,{image:e[a]})]}):null]})};function _({dangerouslySetActionUrl:e,query:t,story:i,slotIndex:r}){let u,_,y,f,v;let{logContextEvent:x}=(0,s.v)(),{action:b,id:S,objects:w,story_type:k,subtitle:P}=i,{text:T,url:E}=b||{},[I,F]=(0,a.useState)(!1),C=(0,a.useCallback)(()=>F(!0),[F]),A=(0,a.useCallback)(()=>F(!1),[F]),R=(w||[]).reduce((e,t)=>"pin"!==t.type?e:[...e,{domain:t.domain,image:{alt:t.title||t.description,height:t.images?.["474x"]?.height,url:t.images?.["474x"]?.url,width:t.images?.["474x"]?.width,price:(t.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),j=(R[0]||{}).domain||void 0;["search_product_collage_story","shop_article_story"].includes(k)?(u=2,_=43,y={story_id:S,story_type:k,entered_query:t}):"shop_brand_story"===k||"shop_brand_affinity_story"===k?(u=1,_=92,j&&(y={story_type:k,commerce_data:JSON.stringify({domain:j})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(k)?(u=72,_=3050):"related_domain_collage"===k?(u=72,_=3455):"related_products_collage"===k&&(u=1,_=3177);let O=()=>x({event_type:101,element:372,component:200,view_type:u,view_parameter:_,aux_data:{story_type:k}}),L=P?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(k)&&b){let e=b.user;f=e&&(e.image_medium_url||e.image_large_url),v=e&&e.full_name}let D=e||E;if(!D)return null;let N=(0,c.Z)({url:D})?"nofollow":"none";return(0,l.jsx)(d.F,{componentType:200,contextLogData:y||{},impressionType:"Story",loggingId:k,slotIndex:r,viewParameter:_,viewType:u,children:({impressionTrackerRef:e})=>(0,l.jsx)(n.xu,{ref:e,children:(0,l.jsx)(n.Tg,{href:D,onTap:O,rel:N,children:(0,l.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:g.container},onMouseEnter:C,onMouseLeave:A,overflow:"hidden",position:"relative",children:[(0,l.jsx)(h,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(k)?1:0,images:R.map(({image:e})=>e)}),(0,l.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:L,rounding:"pill",children:(0,l.jsxs)(n.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[P?(0,l.jsx)(n.xu,{marginBottom:1,children:(0,l.jsx)(n.xv,{align:"start",color:"subtle",children:P.format})}):null,(0,l.jsx)(n.xv,{align:"start",weight:"bold",children:T})]})}),v&&f&&(0,l.jsx)(n.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(o.qE,{name:v,outline:!0,size:"md",src:f})}),(0,l.jsx)(p.Z,{visibility:I?"visible":"none",children:(0,l.jsx)(m.Z,{additionalStyles:g.visualOverlay})})]})})})})}},785049:(e,t,i)=>{i.d(t,{p:()=>o,t:()=>s});var a=i(667294),n=i(342513),l=i(785893);let{Provider:r,useHook:s}=(0,n.Z)("VisualShopContext");function o({children:e}){let[t,i]=(0,a.useState)(),n=(0,a.useRef)(0),s=(0,a.useRef)("");return(0,l.jsx)(r,{value:{cachedOneBarModules:t,setCachedOneBarModules:i,imageContainerScrollTop:n,imageContainerScrollTopForPinId:s},children:e})}},631785:(e,t,i)=>{i.d(t,{Z:()=>I});var a,n,l,r=i(667294);i(167912);var s=i(616550),o=i(922725),d=i(625124),u=i(986631),c=i(340523),p=i(757640),m=i(520846),g=i(258194),h=i(883119),_=i(214877),y=i(777609),f=i(513911);function v({contour:e,context:t,scaledX:i,scaledY:a}){t.beginPath(),e.points.forEach((e,n)=>{if(e){let l=e.x*i,r=e.y*a;0===n?t.moveTo(l,r):t.lineTo(l,r)}})}var x=i(34202),b=i(785893);let S=void 0!==a?a:a=i(754980),w=(e,t,i=5)=>["h","w","x","y"].every(a=>Math.abs(e[a]-t[a])<=i);function k({handleMouseLeave:e,hoveredCutoutId:t,id:i,isHidden:a,maskBounds:n,pinKey:l,pinImageHeight:o,pinImageHovered:d,pinImageWidth:p,requestParams:k,surfaceType:P,trafficSource:T,contours:E,scaledX:I,scaledY:F,scaledWidth:C,scaledHeight:A}){let R=(0,u.Z)(S,l),{logContextEvent:j}=(0,_.v)(),O=(0,s.k6)(),L=(0,s.TH)(),{isHoveringOnCropperEdges:D,scaledValues:N,hasAnimatedCutoutsOnLand:K,setHasAnimatedCutoutsOnLand:M,setSelectedId:Z,selectedId:z,cropArea:U,hasLoggedRender:G,setHasLoggedRender:H}=(0,x.Z)(),{checkExperiment:V}=(0,c.F)(),B="enabled_trace"===V("web_cutouts").group,W=L.pathname.includes("visual-search"),Y=(0,r.useRef)(null),$=(0,r.useRef)(null),Q=(0,r.useRef)(null),[q,X]=(0,r.useState)(0),[J,ee]=(0,r.useState)(!1),[et,ei]=(0,r.useState)(0),[ea,en]=(0,r.useState)(!1),{xRatio:el,yRatio:er,wRatio:es,hRatio:eo}=(0,r.useMemo)(()=>{let[e,t]=n[0],[i,a]=n[1];return{xRatio:e,yRatio:t,wRatio:i,hRatio:a}},[n]),ed=(0,r.useMemo)(()=>({x:el*p,y:er*o}),[el,er,p,o]),{getNormalizedPinImage:eu}=(0,y.Z)({pinKey:R,maxWidth:f.RZ}),{height:ec,width:ep}=eu();(0,r.useEffect)(()=>{N&&N[i]&&w((0,m.Z)({cropArea:{x:N[i].xRatio,y:N[i].yRatio,w:N[i].wRatio,h:N[i].hRatio},scaledWidth:ep,scaledHeight:ec}),U)&&Z?.(i)},[N,i,U,Z,ec,ep]),(0,r.useEffect)(()=>{G||(j({event_type:120,element:14154,view_type:72,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}}),H?.(!0))},[G,j,H]),(0,r.useEffect)(()=>{Y.current&&(Y.current.width=C,Y.current.height=A,$.current=new(window.OffscreenCanvas||window.HTMLCanvasElement)(C,A))},[C,A]);let em=(0,r.useCallback)(()=>{en(!0)},[]);(0,r.useEffect)(()=>{let e=Y.current;return e?.addEventListener("transitionend",em),()=>{e?.removeEventListener("transitionend",em)}}),(0,r.useEffect)(()=>{if(!Y.current||!$.current||!I||!F)return;let e=()=>{if(!Y.current||!$.current)return;let e=Y.current.getContext("2d"),n=$.current.getContext("2d");e&&n&&Y.current&&$.current&&I&&F&&(function({contours:e,context:t,hasAnimatedCutoutsOnLand:i,hoveredCutoutId:a,id:n,isHidden:l,scaledX:r,scaledY:s,setTraceProgress:o,setHasAnimatedCutoutsOnLand:d,style:u,traceProgress:c,selectedId:p}){if(t.clearRect(0,0,t.canvas.width,t.canvas.height),!e||0===e.length||p===a&&a===n||p===n)return;let m={trace:{strokeStyle:"#fff",lineWidth:2},outline:{strokeStyle:"#fff",lineWidth:3}},g=l&&a===n,h=!l||g;if("trace"===u&&void 0!==c){let l=c+.0032;if(i){if(!g&&a!==n)return;l%=1}else(l=Math.min(l,1))>=1&&(o(1),d?.(!0));o(l??0);let p=e[0].points.length,_=Math.floor(.33*p),y=Math.floor(p*l),f=(y-_+p)%p;e.map(e=>{let t=[];return t=f<y?e.points.slice(f,y):e.points.slice(f).concat(e.points.slice(0,y)),{...e,points:t}}).forEach(e=>{e.points.length>1&&(t.strokeStyle=m[u].strokeStyle),v({contour:e,context:t,scaledX:r,scaledY:s}),h&&(t.lineWidth=m[u].lineWidth,t.stroke())})}else e.forEach(e=>{v({contour:e,context:t,scaledX:r,scaledY:s}),h&&(t.strokeStyle=m[u].strokeStyle,t.lineWidth=m[u].lineWidth,t.stroke(),a===n&&(t.save(),t.fillStyle="rgba(255, 255, 255, 0.25)",t.fill(),t.restore()))})}({contours:E,context:n,scaledX:I,scaledY:F,id:i,isHidden:a,hoveredCutoutId:t,opacity:q,setTraceProgress:ei,hasAnimatedCutoutsOnLand:K,setHasAnimatedCutoutsOnLand:M,style:B?"trace":"outline",traceProgress:B?et:void 0,selectedId:z}),e.clearRect(0,0,Y.current.width,Y.current.height),e.drawImage($.current,0,0))};return B?(!ea||d||a&&i===t)&&(Q.current=requestAnimationFrame(e)):e(),()=>{Q.current&&(cancelAnimationFrame(Q.current),Q.current=null)}},[E,ea,q,I,F,K,t,i,a,W,B,d,M,z,et]),(0,r.useEffect)(()=>{if(d)ee(!0),X(1);else if(J)X(0);else{X(1);let e=setTimeout(()=>{ee(!1),X(0)},3e3);return()=>clearTimeout(e)}},[d,J,X]);let eg=(0,r.useCallback)(()=>{if(D||!t||!N?.[t])return;let e=(0,m.Z)({cropArea:{x:N[t].xRatio,y:N[t].yRatio,w:N[t].wRatio,h:N[t].hRatio},scaledWidth:ep,scaledHeight:ec}),i=(0,g.Z)({cropArea:e,cropSource:9,requestParams:k,surfaceType:P,trafficSource:T});if(i!==window.location.search){j({event_type:101,element:14154,view_type:72,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}});let e=`${window.location.pathname}${W?"":"visual-search/"}${i}`;W?O.replace(e):O.push(e)}},[N,t,T,O,k,P,j,D,W,ec,ep]);return(0,b.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{top:ed.y,left:ed.x}},height:o*eo,position:"absolute",width:p*es,children:(0,b.jsx)("canvas",{ref:Y,onMouseLeave:e,onMouseUp:eg,style:{pointerEvents:D?"none":"auto",cursor:t?"pointer":"auto",opacity:W||d?1:q,transition:d||J||W?"none":"opacity 2s linear 1s"}})})}let P=void 0!==n?n:n=i(734501);function T({cutoutsData:e,height:t,pinKey:a,pinImageHovered:n,surfaceType:l,trafficSource:s,width:o}){let d=(0,u.Z)(P,a),{checkExperiment:p}=(0,c.F)(),[m,g]=(0,r.useState)(null),{cutoutContours:_,setCutoutContours:y,scaledValues:f,setScaledValues:v}=(0,x.Z)(),S=(0,r.useCallback)(async(e,t,a,n,l,r,s,o)=>{let d=await i.e(18893).then(i.bind(i,618893)),{ContourTracer:u}=d;await d.initLibrary();let c=new u,p=await createImageBitmap(new Blob([Uint8Array.from(atob(t),e=>e.charCodeAt(0))],{type:"image/png"})),m=c.trace(p,!1),g=a*l,h=n*r;y?.(t=>({...t,[e]:m})),v?.(t=>({...t,[e]:{scaledX:g/p.width,scaledY:h/p.height,scaledWidth:g,scaledHeight:h,xRatio:s,yRatio:o,hRatio:r,wRatio:l}}))},[y,v]);(0,r.useEffect)(()=>{e?.bitmap_masks&&e.bitmap_masks.forEach(e=>{let{id:i,mask_image:a,mask_bounds:n}=e;if(!i||!a||!n?.[0]||!n?.[1])return;let[l,r]=n[1],[s,d]=n[0];[l,r,s,d].every(e=>void 0!==e)&&S(i,a,o,t,l,r,s,d)})},[e,o,t,S]);let w=(0,r.useMemo)(()=>{let e={};return _&&Object.entries(_).forEach(([t,i])=>{i&&(e[t]=i.map(e=>{let t=e.points.map(e=>e.x),i=e.points.map(e=>e.y);return{minX:Math.min(...t),minY:Math.min(...i),maxX:Math.max(...t),maxY:Math.max(...i)}}))}),e},[_]);return p("web_cutouts").anyEnabled||_&&!(Object.keys(_).length<1)?(0,b.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},height:t,onMouseLeave:()=>g(null),onMouseMove:i=>{let a=i.currentTarget.getBoundingClientRect(),n=i.clientX-a.left,l=i.clientY-a.top,r=null;for(let i in _){let a=_[i],s=f?.[i];if(!s||!a)return;let d=e?.bitmap_masks.find(e=>e.id===i);if(!d?.mask_bounds)return;let[u,c]=d.mask_bounds[0]??[0,0],{scaledX:p,scaledY:m}=s,g=(n-u*o)/p,h=(l-c*t)/m;if(a.some((e,t)=>{let a=w[i]?.[t];return a&&g>=a.minX&&g<=a.maxX&&h>=a.minY&&h<=a.maxY&&function(e,t){let{x:i,y:a}=e,n=!1,l=0,r=t.length-1;for(;l<t.length;){let{x:e,y:s}=t[l],{x:o,y:d}=t[r];s>a!=d>a&&i<(o-e)*(a-s)/(d-s)+e&&(n=!n),r=l,l+=1}return n}({x:g,y:h},e.points)})){r=i;break}}r!==m&&g(r)},position:"relative",width:o,children:_&&Object.entries(_).map(([i,a])=>{if(!a||0===a.length)return null;let r=e?.bitmap_masks.find(e=>e.id===i);if(!r)return null;let{mask_bounds:u,is_hidden:c}=r;if(!u||2!==u.length||!f[i])return null;let{scaledX:p,scaledY:h,scaledWidth:_,scaledHeight:y}=f[i];return(0,b.jsx)(k,{contours:a,handleMouseLeave:()=>g(null),hoveredCutoutId:m,id:i,isHidden:!!c,maskBounds:u,pinImageHeight:t,pinImageHovered:n,pinImageWidth:o,pinKey:d,scaledHeight:y,scaledWidth:_,scaledX:p,scaledY:h,surfaceType:l,trafficSource:s},i)})}):null}let E=void 0!==l?l:l=i(276971);function I({customCropper:e,imageSignature:t,imageSize:i,initialCropArea:a,pinId:n,pinKey:l,requestParams:h,showAnimation:_,surfaceType:y,trafficSource:f,viewParameter:v,viewType:x}){let{checkExperiment:S}=(0,c.F)(),w=(0,u.Z)(E,l),k=(0,s.k6)(),P=S("web_cutouts").anyEnabled,{data:I}=(0,p.Z)(P?{name:"ApiResource",options:{url:`/v3/pins/${n}/segmentation/sam/`,data:{client:"visual_cutout",cleanup_masks:!0}}}:null),[F,C]=(0,r.useState)(void 0),[A,R]=(0,r.useState)(!1),[j,O]=(0,r.useState)({w:0,h:0,x:0,y:0}),[L,D]=(0,r.useState)(0),N=(0,r.useMemo)(()=>(w.visualObjects??[]).filter(e=>e.isStela)||[],[w.visualObjects]);(0,r.useEffect)(()=>{D(N.findIndex(e=>{var t;let{x:n,y:l,w:r,h:s}=e;return t=(0,m.Z)({cropArea:{x:n,y:l,w:r,h:s},scaledWidth:i.w??0,scaledHeight:i.h??0}),4>=Object.keys(a).reduce((e,i)=>e+Math.abs(a[i]-t[i]),0)}))},[i,a,N]);let K=N&&!!N.length;(0,r.useEffect)(()=>{void 0===F&&(P?K&&I&&I?.bitmap_masks&&C(!!I.bitmap_masks):C(!1))},[P,I,K,F]);let M=({origCrop:e,cropSource:t,title:i})=>{let a=window.location.search,n=(0,g.Z)({cropArea:e,cropSource:t??6,requestParams:h,surfaceType:y,title:i,trafficSource:f});n!==a&&k.replace({pathname:window.location.pathname,search:n,state:{internalNavigation:!0}})};return(0,b.jsxs)(o.Z,{imageSize:i,initialCropArea:a,onChange:e??M,previewCropArea:j,showPreviewArea:!1,viewParameter:v,children:[!1===F&&K&&(0,b.jsx)(d.Z,{currentSpotlightIdx:L,handleSpotlightClick:t=>{let a=N[t],{x:n,y:l,w:r,h:s}=a,o={origCrop:(0,m.Z)({cropArea:{x:n,y:l,w:r,h:s},scaledWidth:i.w??0,scaledHeight:i.h??0}),cropSource:a.isStela?4:1,trafficSource:f,title:a.title||""};e?e(o):M(o)},handleSpotlightHover:e=>{if(e!==L){R(!0);let{x:t,y:a,w:n,h:l}=N[e];O((0,m.Z)({cropArea:{x:t,y:a,w:n,h:l},scaledWidth:i.w??0,scaledHeight:i.h??0}))}},handleSpotlightUnhover:()=>{R(!1)},imageSignature:t,imageSize:i,pinKey:w,showAnimation:_,viewParameter:v,viewType:x}),F&&!!I&&i.h&&i.w&&(0,b.jsx)(T,{cutoutsData:I,height:i.h,pinKey:w,surfaceType:y,width:i.w})]},JSON.stringify(a))}},513911:(e,t,i)=>{i.d(t,{I6:()=>n,Nv:()=>a,RZ:()=>l,ZG:()=>o,b9:()=>s,mV:()=>d,s0:()=>r});let a=44,n=24,l=446,r=.05,s=36,o=20,d=16},160567:(e,t,i)=>{i.d(t,{Pw:()=>a,SB:()=>n,ZP:()=>r,x9:()=>l});let a=80,n=56,l=e=>"phone"===e?n:a;function r(e,t){return t?0:l(e)}},934378:(e,t,i)=>{i.d(t,{$N:()=>g,Cu:()=>_,GY:()=>u,MZ:()=>s,NR:()=>c,bC:()=>h,fm:()=>a,id:()=>l,kM:()=>r,q6:()=>n,qp:()=>d,uV:()=>p,ug:()=>m,xL:()=>o});let a={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",BULK_ID_LIBRARY:"BULK_ID_LIBRARY",RESOURCES:"RESOURCES"},n={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},l={INTEREST:"INTEREST",DEVICE:"DEVICE",LANGUAGE:"LANGUAGE",LOCATION:"LOCATION",LOCATION_COUNTRY:"LOCATION_COUNTRY",LOCATION_METRO:"LOCATION_METRO",LOCATION_REGION:"LOCATION_REGION",AUDIENCE:"AUDIENCE",TARGETING_TEMPLATE:"TARGETING_TEMPLATE",CONVERSION_TAG:"CONVERSION_TAG"},r={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},s={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud",PINTEREST_CAPI_CONNECT:"Pinterest CAPI Connect"},o={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},d={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API",NOCODE_CONVERSIONS_API_SETUP_FLOW:"NOCODE_CONVERSIONS_API_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW_CAPI_TAB:"PINTEREST_EVENTS_OVERVIEW_CAPI_TAB",PINTEREST_EVENT_HISTORY_CAPI_TAB:"PINTEREST_EVENT_HISTORY_CAPI_TAB"},u={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},c={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",HOSTNAME:"hostname",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},p="604800",m="86400",g={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},h="click",_="view"},263032:(e,t,i)=>{i.d(t,{YS:()=>s,eF:()=>o,m_:()=>r});var a=i(934378),n=i(976731),l=i(953565);function r(e,t,i,n,r){let s=new URLSearchParams,o=t.reduce((e,t)=>{if(null!=t){let i=function(e){let t;try{t=decodeURIComponent(e)}catch(i){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(a){let i=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(i&&i.length>1)return i[1];return e}}(t);return e.add(i)}return e},new Set);s.append(a.NR.SOURCE_EVENT_ID,e??"0"),s.append(a.NR.DESTINATION,JSON.stringify([...o])),s.append(a.NR.EXPIRY,i?a.uV:a.ug),s.append(a.NR.PRIORITY,i?a.NR.CLICK_PRIORITY:a.NR.VIEW_PRIORITY),r&&s.append(a.NR.ADVERTISER_ID,r),n&&s.append(a.NR.CAMPAIGN_ID,n),s.append(a.NR.SOURCE_EVENT_TYPE,i?a.bC:a.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&s.append(a.NR.HOSTNAME,e)}catch(e){(0,l.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+s.toString()}async function s(e,t,i,a,s,o,d,u,c){let p;let{appType:m,osType:g}=o||{},h="",_="";if(["Pin","pinImpressions"].includes(e)&&t&&(a||u||c)){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:m,osType:g}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting")){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:m,osType:g}});return}h=r(i,[a,u,c],!1,s,d);try{_=new URL(window.location.href).hostname}catch(e){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"hostname_parse_failed",href:window&&window.location&&window.location.href}})}if(_&&"www.pinterest.com"!==_)document.createElement("img").setAttribute("attributionsrc",h),(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"international",appType:m,osType:g,hostname:_}});else if(!(p=await window.fetch(h,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}})).ok)throw Error("server request failed.");(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:m,osType:g}})}catch(e){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:(0,n.Z)(e,"name"),message:(0,n.Z)(e,"message"),appType:m,osType:g,hostname:_,responseStatus:p&&p.status}})}}else(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:m,osType:g}})}function o(e){if(e){let t=e.toLowerCase();if(t.includes("windows"))return"windows xp"===t?1:"windows vista"===t?2:"windows 7"===t?3:"windows 8"===t?4:12;if(t.includes("mac os"))return 5;if(t.includes("android"))return 7;if(t.includes("ios"))return 6;if(t.includes("ubuntu"))return 8;if(t.includes("chromium os"))return 13}return 0}},922719:(e,t,i)=>{i.d(t,{CC:()=>n,Ll:()=>r,XF:()=>l});let a=(e,t,i)=>({x:Math.floor(e*Math.cos(i)),y:Math.floor(t*Math.sin(i))}),n=(e,t)=>a(t/2,e/2,2*Math.random()*Math.PI),l=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,r=e=>["@-webkit-keyframes","@keyframes"].map(t=>e.map(e=>t+" "+e).join("\n")).join("\n")},86785:(e,t,i)=>{i.d(t,{G6:()=>l,i7:()=>r,oi:()=>a,u$:()=>n,un:()=>o,vU:()=>s,w1:()=>d});let a=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),n=e=>e?e.includes("Chrome")?a.CHROME:e.includes("Safari")?a.SAFARI:e.includes("Firefox")?a.FIREFOX:e.includes("Opera")?a.OPERA:e.includes("IE")?a.IE:e.includes("Edge")?a.EDGE:a.OTHER:a.OTHER;function l(e){return n(e)===a.SAFARI}function r(e){return n(e)===a.CHROME}function s(e){return n(e)===a.FIREFOX}function o(e){return n(e)===a.EDGE}function d(e){return n(e)===a.IE}},743079:(e,t,i)=>{i.d(t,{DW:()=>l,I:()=>n,oo:()=>a,zI:()=>r});let a=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t&&[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},n=.18,l=(e,t,i)=>.2126*(e/255)**2.2+.7151*(t/255)**2.2+.0721*(i/255)**2.2,r=e=>{let t=e.replace("#",""),i=parseInt(t.substr(0,2),16);return(299*i+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3<155}},92785:(e,t,i)=>{i.d(t,{Z:()=>r,k:()=>a.kH});var a=i(135839),n=i(5859),l=i(785893);let r=({dateFormatType:e,useUTC:t=!0,value:i})=>(0,l.jsx)(n.LC,{children:n=>(0,a.ZP)(n.locale,i,e,t)})},135839:(e,t,i)=>{i.d(t,{A5:()=>l,ZP:()=>r,kH:()=>a});let a={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:"year_short_month_day_time_timezone",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},n=function(e){switch(e){case a.YEAR:return{year:"numeric"};case a.LONG:return{year:"numeric",month:"long",day:"numeric"};case a.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case a.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case a.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case a.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case a.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case a.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case a.MONTH_DAY:return{month:"long",day:"numeric"};case a.SHORT_MONTH:return{month:"short"};case a.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case a.DAY:return{day:"numeric"};case a.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case a.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case a.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case a.YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:return{month:"short",year:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case a.TIME:return{hour:"numeric",minute:"2-digit"};case a.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case a.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function l(){return -1!==Intl.DateTimeFormat.toString().indexOf("[native code]")}function r(e,t,i,a=!0){let s=n(i);return a&&(s.timeZone="UTC"),l()||(s.calendar="gregory"),new Intl.DateTimeFormat(e,s).format(t)}},541841:(e,t,i)=>{i.d(t,{Z:()=>s});var a=i(667294),n=i(973935);function l(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r extends a.Component{constructor(...e){super(...e),l(this,"observer",null),l(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=n.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return a.Children.only(this.props.children)}}let s=r},877457:(e,t,i)=>{i.d(t,{g:()=>r,t:()=>l});var a=i(667294);let n=(0,a.createContext)(null),l=n.Provider,r=()=>(0,a.useContext)(n)},401429:(e,t,i)=>{i.d(t,{Z:()=>h});var a=i(667294),n=i(545007),l=i(587703),r=i(25919),s=i(216167);let o=(e,t,i,a)=>(n,l)=>o=>{if(n&&n.id){let d=s.Z.create(e,{placed_experience_id:n.id,extra_context:{}});switch(t){case"dismissed":d.callDelete().then(()=>{o((0,r.fO)()),i&&a&&i({event_type:a,object_id_str:n.id.toString()})});break;case"completed":d.callUpdate().then(()=>{l||o((0,r.fO)()),i&&a&&i({event_type:a,object_id_str:n.id.toString()})});break;case"viewed":d.callUpdate().then(()=>{i&&a&&i({event_type:a,object_id_str:n.id.toString()})})}}},d=e=>o("UserExperienceCompletedResource","completed",e,6567),u=o("UserExperienceResource","dismissed"),c=e=>o("UserExperienceViewedResource","viewed",e,4503);var p=i(785893);function m(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends a.Component{constructor(...e){super(...e),m(this,"state",{hasCompleted:[],hasDismissed:[]}),m(this,"view",()=>{let{experience:e,isBackendExperience:t,targeting:i,viewExperience:a,viewExperienceObject:n}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",n(e)):i?a(e.placement_id,e.experience_id,i):a(e.placement_id,e.experience_id))}),m(this,"complete",e=>{let{completeExperience:t,completeExperienceObject:i,experience:a,isBackendExperience:n,preventRemoval:l,targeting:r}=this.props,s=e||1;if(a&&!this.state.hasCompleted.includes(a.experience_id)){let{placement_id:e,experience_id:o}=a||{},d=l||2===s;(1===s||d)&&e&&o&&(n?i(a,d):r?t(e,o,d,r):t(e,o,d),this.setState(e=>({hasCompleted:[...e.hasCompleted,o]})))}}),m(this,"dismiss",()=>{let{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:a,preventRemoval:n,targeting:l}=this.props,{placement_id:r,experience_id:s}=i||{};i&&!this.state.hasDismissed.includes(s)&&(a?t(i):l?e(r,s,!!n,l):e(r,s,!!n),this.setState(e=>({hasDismissed:[...e.hasDismissed,s]})))}),m(this,"isEligibleExperience",()=>{let{experience:e}=this.props;if(!e)return!1;let{eligibleIds:t,eligibleTypes:i,predicate:a}=this.props,{experience_id:n,type:l}=e;return t&&t.length?t.includes(n):i&&i.length?i.includes(l):!a||a(e)})}componentDidMount(){if(this.props.disableAutoView)return;let{experience:e}=this.props;e&&this.isEligibleExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;let t=e.experience,i=this.props.experience;i&&this.isEligibleExperience()&&(t&&t.experience_id===i.experience_id||this.view())}render(){let{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.isEligibleExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({})}):a.Children.only(e):null}}function h(e){let t=(0,n.v9)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0)),i=(0,n.I0)(),a=(0,r.be)(),s=(0,r.Am)(),o=(0,r.Ig)(),m=(0,l.Z)();return(0,p.jsx)(g,{...e,completeExperience:(e,t,n,l)=>i(a(e,t,n,!1,{},l)),completeExperienceObject:(e,t)=>i(d(m)(e,t)),dismissExperience:(e,t,a,n)=>i(s(e,t,a,void 0,n)),dismissExperienceObject:e=>i(u(e)),experience:t,viewExperience:(e,t,a)=>i(o(e,t,!1,!1,void 0,a)),viewExperienceObject:e=>i(c(m)(e))})}m(g,"defaultProps",{eligibleIds:[],eligibleTypes:[]})},619370:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var a=i(667294),n=i(883119),l=i(401429),r=i(785893);function s(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends a.PureComponent{constructor(...e){super(...e),s(this,"onScroll",()=>{let{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),s(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){let{anchor:e,text:t,thumbnails:i,idealDirection:a,forceDirection:l}=this.props,s=i.slice(-3);return(0,r.jsx)(n.J2,{anchor:e,color:"white",forceDirection:l,idealDirection:a,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,r.jsxs)(n.xu,{alignContent:"center",display:"flex",justifyContent:"between",padding:3,width:"100%",children:[(0,r.jsx)(n.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,r.jsx)(n.xv,{color:"default",weight:"bold",children:t})}),(0,r.jsx)(n.xu,{display:"flex",marginEnd:-2,paddingX:2,children:s.map(e=>(0,r.jsx)(n.xu,{height:60,paddingX:1,width:50,children:(0,r.jsx)(n.zd,{height:60,rounding:2,children:(0,r.jsx)(n.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}var d=i(76561);function u(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends a.Component{constructor(...e){super(...e),u(this,"dismissRef",(0,a.createRef)()),u(this,"state",{paused:!1}),u(this,"dismissCb",()=>{this.dismissRef.current?.()}),u(this,"handlePulsarClick",(e,t)=>{e?this.setState({paused:!0}):t()})}componentWillUnmount(){let{anchor:e}=this.props;this.timer&&clearTimeout(this.timer),e?.removeEventListener("click",this.dismissCb)}setDefaultPulsarTooltip(e){e.has_pulsar=null==e.has_pulsar||e.has_pulsar,e.has_tooltip=null==e.has_tooltip||e.has_tooltip}getText(e,t,i){return(t&&e.text.replace("{boardName}",t),i)?i(e):e.text}render(){let{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:s,fontSize:u,forceDirection:c,hasFullWidthButton:p=!0,idealDirection:m,useMasonryFlyout:g,noClickToDismiss:h,onClickComplete:_,onClickDismiss:y,placementId:f,shouldTimeoutDismiss:v,textAlign:x,textOverflow:b,textOverrideFn:S,textWeight:w,customizedComplete:k,pulsarZIndex:P,advertiserId:T,dismissButtonLocation:E,dismissButtonMarginTop:I,zIndex:F}=this.props,C=t||(({children:e})=>g?(0,r.jsx)(n.mh,{children:e}):e);return(0,r.jsx)(l.Z,{eligibleIds:i,eligibleTypes:[8],placementId:f,targeting:T?{advertiserId:parseInt(T,10)}:null,children:({complete:t,dismiss:i,experience:l})=>{let{display_data:{scroll_to_dismiss:g,scroll_to_dismiss_delay_in_seconds:f=0,...T}}=l,A=g&&e,R=()=>{j(),this.timer||(this.timer=setTimeout(i,1e3*f))},j=()=>{A&&(window.removeEventListener("scroll",R),window.removeEventListener("touchmove",R))},O=()=>{j(),t()};if(A&&(window.addEventListener("scroll",R),window.addEventListener("touchmove",R)),this.setDefaultPulsarTooltip(T),!T.has_pulsar&&!T.has_tooltip)return O(),null;v&&T.disappearTime&&T.disappearTime>0&&(this.timer=setTimeout(()=>(R(),null),T.disappearTime));let L=501041===l.experience_id||505086===l.experience_id;return T.has_tooltip&&!T.has_pulsar&&(this.dismissRef.current=R,e?.addEventListener("click",this.dismissCb)),(0,r.jsxs)(a.Fragment,{children:[T.has_pulsar&&(0,r.jsx)(d.Z,{anchor:e,leftOverride:L?342:void 0,onTouch:()=>this.handlePulsarClick(T.has_tooltip,O),paused:this.state.paused,topOverride:L?-5:void 0,zIndex:P&&P.index()}),T.has_tooltip&&(!T.has_pulsar||this.state.paused)&&(T.thumbnail_urls?(0,r.jsx)(o,{anchor:e,dismiss:R,forceDirection:c,idealDirection:m||"down",text:T.text,thumbnails:T.thumbnail_urls}):(0,r.jsx)(C,{children:(0,r.jsx)(n.Li,{anchor:e,forceDirection:c,idealDirection:m||"down",onDismiss:h?()=>{}:R,shouldFocus:!1,size:"sm",zIndex:F,children:(0,r.jsxs)(n.xu,{column:12,padding:3,children:[(0,r.jsxs)(n.xv,{align:"right"===x?"end":x,color:"light",overflow:b,size:u,weight:w||"bold",children:[this.getText(T,s,S),T.secondary_cta_link&&(0,r.jsx)(n.xu,{display:"inlineBlock",marginStart:1,children:(0,r.jsx)(n.xv,{color:"light",size:u,weight:"bold",children:(0,r.jsx)(n.rU,{display:"inlineBlock",href:T.secondary_cta_link.url,target:"blank",underline:"hover",children:T.secondary_cta_link.text})})})]}),T.sub_text&&(0,r.jsx)(n.xu,{paddingY:2,children:(0,r.jsx)(n.xv,{color:"light",size:u,children:T.sub_text})}),(T.dismiss_button_text||T.complete_button_text)&&(0,r.jsxs)(n.xu,{alignItems:"center",display:"flex",justifyContent:E||"start",marginTop:I||2,children:[T.dismiss_button_text&&(0,r.jsx)(n.xu,{column:6,marginEnd:1,children:(0,r.jsx)(n.zx,{color:"white",fullWidth:p,onClick:()=>{y&&y(),R()},size:"md",text:T.dismiss_button_text})}),T.complete_button_text&&(0,r.jsx)(n.xu,{column:T.dismiss_button_text?6:12,children:k?(0,r.jsx)(n.iP,{fullHeight:!0,onTap:()=>{O(),_&&_()},rounding:2,children:(0,r.jsx)(n.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"10px"}},display:"flex",justifyContent:"center",padding:2,rounding:2,children:(0,r.jsx)(n.xv,{color:"light",weight:"bold",children:T.complete_button_text})})}):(0,r.jsxs)(n.kC,{justifyContent:"center",children:[T.complete_button_cta_url&&(0,r.jsx)(n.ZP,{color:"white",fullWidth:p,href:T.complete_button_cta_url,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),O(),_&&_()},size:"md",target:T.complete_button_cta_url?"blank":null,text:T.complete_button_text}),!T.complete_button_cta_url&&(0,r.jsx)(n.zx,{color:"white",fullWidth:p,onClick:()=>{O(),_&&_()},size:"md",text:T.complete_button_text})]})})]})]})})}))]})}})}}u(c,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},76561:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(883119),n=i(667294),l=i(785893);let r=(e,t,i,a)=>({horizontalOffset:-(a/2-t/2),verticalOffset:-(i/2-e/2)});function s({anchor:e,children:t,zIndex:i,leftOverride:s,topOverride:o}){let d=(0,n.useRef)(null),[u,c]=(0,n.useState)(0),[p,m]=(0,n.useState)(0),{height:g,width:h}=e.getBoundingClientRect();return(0,n.useEffect)(()=>{let{current:t}=d;if(e&&t){let{height:e,width:i}=t.getBoundingClientRect(),{horizontalOffset:a,verticalOffset:n}=r(g,h,e,i);c(a),m(n)}}),(0,l.jsx)(a.xu,{ref:d,dangerouslySetInlineStyle:{__style:{left:s||u,top:o||p}},"data-test-id":"center-box",position:"absolute",zIndex:i?new a.Ry(i):void 0,children:t})}let o=function(e){let{anchor:t,leftOverride:i,onTouch:n,onMouseEnter:r,paused:o,size:d,topOverride:u,zIndex:c}=e;return t?(0,l.jsx)(s,{anchor:t,leftOverride:i,topOverride:u,zIndex:c,children:(0,l.jsx)(a.iP,{fullWidth:!1,onMouseEnter:r,onTap:({event:e})=>n(e),rounding:"circle",children:(0,l.jsx)(a.o3,{paused:o,size:d})})}):null}},547643:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(340523),n=i(5859),l=i(84768);function r(e){let{isAuthenticated:t}=(0,n.B)(),{expName:i,anyEnabled:r,group:s}=function({experimentsClient:e,handlerId:t,isAuthenticated:i,skipActivation:a}){let{checkExperiment:n}=e,l=n(i?"web_masonry_v2_auth":"web_masonry_v2_unauth",{dangerouslySkipActivation:a});return l.group?{expName:i?"web_masonry_v2_auth":"web_masonry_v2_unauth",...l}:"www/[username]/[slug].js"!==t||i?"www/pin/[id].js"!==t||i?{expName:"",anyEnabled:!1,group:""}:{expName:"web_masonry_v2_unauth_pin",...n("web_masonry_v2_unauth_pin",{dangerouslySkipActivation:a})}:{expName:"web_masonry_v2_unauth_board",...n("web_masonry_v2_unauth_board",{dangerouslySkipActivation:a})}}({experimentsClient:(0,a.F)(),handlerId:(0,l.MM)(),isAuthenticated:t,skipActivation:e?.skipActivation??!1});return{expName:i,anyEnabled:r,group:s,isMeasureAllEnabled:"enabled_measure_all"===s||"enabled_measure_all_impression_fix"===s,isImpressionFixEnabled:"control_impression_fix"===s||"enabled_impression_fix"===s||"enabled_measure_all_impression_fix"===s}}},757017:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(188349),n=i(140017),l=i(339001);function r(){let e=(0,n.ZP)();return function(t,i){let n=new Date(t).getTime(),r=Date.now()-n,s=Math.floor(r/a.FS),o=Math.floor(r/a.UK),d=Math.floor(r/a.F4),u=Math.floor(r/a.VL),c=Math.floor(r/a.N9),p=Math.floor(r/a.N1),m=e.ngettext('{{ minutes }} minute ago', '{{ minutes }} minutes ago', s, ' - ', ' -- '),g=e.ngettext('{{ hours }} hour ago', '{{ hours }} hours ago', o, ' - ', ' -- '),h=e.ngettext('{{ days }} day ago', '{{ days }} days ago', d, ' - ', ' -- '),_=e.ngettext('{{ weeks }} week ago', '{{ weeks }} weeks ago', u, ' - ', ' -- '),y=e.ngettext('{{ months }} month ago', '{{ months }} months ago', c, 'useGetHumanizedTimeSince.monthsString', 'months since last update'),f=e.ngettext('{{ years }} year ago', '{{ years }} years ago', p, ' - ', ' -- '),v=e.ngettext('{{ minutes }}m', '{{ minutes }}m', s, 'minutes ago abbreviated', 'minutes ago abbreviated'),x=e.ngettext('{{ hours }}h', '{{ hours }}h', o, 'hours ago abbreviated', 'hours ago abbreviated'),b=e.ngettext('{{ days }}d', '{{ days }}d', d, 'days ago abbreviated', 'days ago abbreviated'),S=e.ngettext('{{ weeks }}w', '{{ weeks }}w', u, 'weeks ago abbreviated', 'weeks ago abbreviated'),w=e.ngettext('{{ months }}mo', '{{ months }}mo', c, 'months ago abbreviated', 'months ago abbreviated'),k=e.ngettext('{{ years }}y', '{{ years }}y', p, 'years ago abbreviated', 'years ago abbreviated');return p>0?(0,l.nk)(i?k:f,{years:p}).join(""):c>0?(0,l.nk)(i?w:y,{months:c}).join(""):u>0?(0,l.nk)(i?S:_,{weeks:u}).join(""):d>0?(0,l.nk)(i?b:h,{days:d}).join(""):o>0?(0,l.nk)(i?x:g,{hours:o}).join(""):s>0?(0,l.nk)(i?v:m,{minutes:s}).join(""):e._('Just now', ' - ', ' -- ')}}},666472:(e,t,i)=>{i.d(t,{F:()=>y,Z:()=>_});var a=i(667294),n=i(263032),l=i(86785),r=i(214877),s=i(547643),o=i(30378),d=i(5859),u=i(554786),c=i(369708),p=i(237040),m=i(953565),g=i(84768);let h={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},CuratedBoard:{impressionType:"curatedBoardImpressions",idType:"curatedBoardIdStr",eventType:15555}};function _({carouselData:e,closeupImpressionType:t,closeupNavigationType:i,componentType:_,contextLogData:y,clientTrackingParams:f,duploShouldTrackPinEvents:v,elementType:x,impressionAuxFields:b,inImpressionExp:S,impressionType:w,impressionsFramework:k,isPaused:P,loggingId:T,objectIdStr:E,slotIndex:I,trackCarousel:F,viewData:C,viewParameter:A,viewType:R,isPromoted:j,storyPinProductEventData:O}){let{logContextEvent:L}=(0,r.v)(),{logMrcVideoAdEventOnPlay:D}=(0,c.r)(),{userAgent:{browserName:N}}=(0,d.B)(),{logStat:K}=(0,p.Yg)(),M=k||o.Z,Z=(0,a.useRef)(null),z=a=>{let r=h[w],s=r.idType,o={clientTrackingParams:f,endTime:a.endTime,[s]:T,slotIndex:I,time:a.startTime,renderDuration:a.endTime-a.startTime,type:t,...b,forcedExit:"removed"===a.forcedExit?0:void 0};if("Pin"===w){let e=[],t=a.visibleEvents||new Map,i=a.hiddenEvents||new Map;if([1,50,80,2].forEach(a=>{t.has(a)&&e.push({type:a,time:1e6*(t.get(a)||0),visible:!0}),i.has(a)&&e.push({type:a,time:1e6*(i.get(a)||0),visible:!1})}),o={...o,pinCellWidth:a.pinCellWidth||0,pinCellHeight:a.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,t)=>e.time-t.time)},(0,l.i7)(N)&&b&&b.isPromoted){let{attributionSourceId:e,isPromoted:t,link:i,campaignId:a,araAuxData:l,advertiserId:r,domain:s,adDestinationUrl:o}=b;(0,n.YS)(w,t??null,e??null,i??null,a??null,l??null,r??null,s??null,o??null)}}let d={component:_,object_id_str:E,view_type:R,view_data:C||{},view_parameter:A};if(F)e&&F&&L({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...o,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...d,aux_data:{...y}});else{let e={clientTrackingParams:f,event_type:r.eventType,...d,element:x,event_data:{[r.impressionType]:"Story"===w?o:[o],...O?{storyPinProductEventData:O}:{}},aux_data:{closeup_navigation_type:i,...y}};L(e),D(e)}v&&K("log_pin_impression")},{expName:U,group:G}=(0,s.Z)({skipActivation:!0}),H=(0,u.ZP)(),V=(0,g.MM)(),{isAuthenticated:B}=(0,d.B)(),W=(0,a.useCallback)(()=>{let e=!1;try{let{current:t}=Z;if(t instanceof HTMLElement&&(!j||t.getElementsByTagName("img").length>0)){let i=M.start(t);i.onExitViewport(z).setDebugId(T||"unknown"),v&&i.onEnterViewport(()=>{K("log_pin_impression_track_enter_viewport")}),e=!0,G&&(0,m.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:H,experimentName:U,group:G,handlerId:V,isAuthenticated:B,slotIndex:I??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}v&&K("log_pin_impression_track",{didStartTracking:e})},[Z.current]);return(0,a.useEffect)(()=>(S&&!M.inExperiment&&M.setExperimentStatus(!0),P||W(),()=>{let{current:e}=Z;e instanceof HTMLElement&&(!j||e.getElementsByTagName("img").length>0)&&M.stop(e)}),[P,W]),Z}let y=({children:e,...t})=>e({impressionTrackerRef:_(t)})},307772:(e,t,i)=>{function a(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>c,LU:()=>p,ZP:()=>m});let n=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,l={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},r={},s={background:"#FF8A8A",transform:"scale(.98)"},o={init:e=>({transform:`scale(${r[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[l.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[l.exit]:s,[l.stopped]:s,[l.paused]:s,[l.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class d{constructor(e){a(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),a(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),a(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),a(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting,i=Date.now();e.intersectionRatio>0&&!this.visibleEvents.has(1)&&this.visibleEvents.set(1,i),e.intersectionRatio>.5?this.visibleEvents.has(50)||this.visibleEvents.set(50,i):this.visibleEvents.has(50)&&!this.hiddenEvents.has(50)&&this.hiddenEvents.set(50,i),e.intersectionRatio>.8?this.visibleEvents.has(80)||this.visibleEvents.set(80,i):this.visibleEvents.has(80)&&!this.hiddenEvents.has(80)&&this.hiddenEvents.set(80,i),1!==e.intersectionRatio||this.visibleEvents.has(2)||this.visibleEvents.set(2,i),e.boundingClientRect.top<=143&&this.visibleEvents.has(1)&&!this.hiddenEvents.has(1)&&this.hiddenEvents.set(1,i),e.boundingClientRect.bottom<=143&&this.visibleEvents.has(2)&&!this.hiddenEvents.has(2)&&this.hiddenEvents.set(2,i),t&&!this.inViewport?(this.startTime=i,this.pinCellWidth=this.node.offsetWidth,this.pinCellHeight=this.node.offsetHeight,this._debug(l.enter,{startTime:i,node:this.node}),this.enterCallbacks.forEach(e=>e())):!t&&this.inViewport&&(this._debug(l.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId="",this.visibleEvents=new Map,this.hiddenEvents=new Map,this.pinCellWidth=0,this.pinCellHeight=0}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,n&&Object.assign(this.node.style,o.init(e)),this}pause(){return this.inViewport&&(this._debug(l.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(l.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(l.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e,hiddenEvents:this.hiddenEvents,visibleEvents:this.visibleEvents,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight}}_debug(e,t){if(n)switch(window.console.log(` ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),o[e]&&Object.assign(this.node.style,o[e]),e){case l.flushed:case l.paused:case l.exit:r[this.debugId]=!0}}}function u(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let c=!0,p=!1;class m{constructor(){u(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),u(this,"_handleMutations",(e,t)=>{let i=this.mutationObservers.get(t);i&&i.offsetHeight<1&&i&&this.stop(i,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=p,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let i=this.activeImpressions.get(e);i&&(i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),window.activeImpressions?.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);return t||(t=new d(e),this.activeImpressions.set(e,t),window.activeImpressions?.set(e,t),this.observer.observe(e),t.setMutationObserver(new window.MutationObserver((e,t)=>this._handleMutations(e,t))),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})),t}pause(e=c){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority!==p||(this.pausePriority=e))}resume(e=c){(e!==p||this.pausePriority!==c)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=p)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:i}=t.getBoundingClientRect();return i>e?i:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:i}=t.getBoundingClientRect();return i<e?i:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let i={rootMargin:`${-e}px 0px ${-t}px`,threshold:[0,.5,.8,1]};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(e=>this.observer.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},30378:(e,t,i)=>{i.d(t,{Z:()=>a});let a=new(i(307772)).ZP},59545:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(667294);function n(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends a.Component{constructor(...e){super(...e),n(this,"ref",(0,a.createRef)()),n(this,"observer",null),n(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let r=l},681508:(e,t,i)=>{i.d(t,{Rq:()=>l,Vf:()=>r,jd:()=>s,oy:()=>o,yR:()=>c});var a=i(658583),n=i(622541);let l=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,r=28,s=e=>window.innerHeight>=748&&l(e),o=()=>"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700),d=()=>{a.t8(n.oj,String(!0),(0,a.kZ)(n.oj))},u=()=>!!a.U2(n.oj),c=()=>{let e=o();e!==u()&&(e?d():a.zN(n.oj.name),"undefined"!=typeof window&&window.location.reload())}},422210:(e,t,i)=>{i.d(t,{Z:()=>a});function a(e){if(!e)return!1;let t=new Date(e);return t.setDate(t.getDate()+28),new Date().getTime()<t.getTime()}},179425:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var a=i(883119),n=i(213377),l=i(681508),r=i(403862),s=i(5859),o=i(785893);let d=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:i=!1,hasGutter:d=!0,height:u,showKeychainError:c=!1,useViewport:p=!1})=>{let m=(0,s.B)(),g=(0,l.jd)(m.userAgent.platform)?l.Vf:0;return(0,o.jsx)(a.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:p?`calc(100vh - ${g}px)`:u,paddingX:d?n.D6:void 0,paddingY:i||c?void 0:3,children:(0,o.jsx)(r.C,{value:!!d,children:e})})}},403862:(e,t,i)=>{i.d(t,{C:()=>l,V:()=>r});var a=i(667294);let n=(0,a.createContext)(!1),l=n.Provider,r=()=>(0,a.useContext)(n)},389638:(e,t,i)=>{i.d(t,{Z:()=>l});var a=i(616550);let n=["/BingSiteAuth.xml","/about","/add-account","/ads","/ads.txt","/age_verification","/all","/app-ads.txt","/apple-app-site-association","/apple-app-site-association.p7m","/attribution_source","/bot.html","/branded-pins","/browserbutton","/buy-it","/careers","/categories","/close-account","/content-claiming","/convert-business","/convert-personal","/create-business","/create-personal","/creation-inspiration","/creator-onboarding-landing","/csrf_error","/ct.html","/deactivate-account","/deed6a3ef3a44d41bb3ae2bad137db84.txt","/developers","/discover","/edit","/email_verification_error","/engagement","/explore","/favicon.ico","/fb.html","/flyup-instant-loading-indicator-app-shell.html","/following","/getWebPushKey","/google_gdn.html","/google_search.html","/googlef5dc42d6e03f6e61.html","/guidedsearch","/help","/holidays-celebrations","/homefeed","/idea-ads-tool","/idea-pin-builder","/ideas","/inbox","/install-shuffles","/invited","/jobs","/lens-search","/login","/logout","/manifest.json","/manifest.webapp","/me","/messages","/mobile","/notifications","/oauth","/app-factory-oauth","/appealed-pin","/oembed.json","/offline.html","/offsite","/opensearch.xml","/parent_contact_info","/parental-passcode","/pin-builder","/pin-creation-tool","/pin-editor","/pin_catalog","/pin_redirect","/pinterest-wellbeing","/pinterest-predicts","/pinterestlens","/pinterestlenstryon","/pinterestwellbeing","/policy","/product-catalogs","/public-beta","/quick-instant-loading-indicator-app-shell.html","/quick-lite-instant-loading-indicator-app-shell.html","/recently-viewed","/refresh_stored_accounts","/refresh_token","/report","/reports-and-violations","/request-data","/robots.txt","/safe-redirect","/search","/settings","/shopping","/signup","/socialmanager","/story-pin-builder","/story_feed","/sw-shell.html","/sw.html","/sw.js","/switch_account","/terms","/today","/topics","/transparent.html","/unauth-profile","/unlink","/upload-image","/upload-image-lens-history","/upload-lens-image","/upload-profile-image","/verified","/verify","/videos","/web-custom-svg","/web-mentorship","/welcome","/windows-app-web-link","/your-shop"];function l(e){return!!(0,a.LX)(e.pathname,{path:"/:username/",exact:!0})&&!n.includes(e.pathname.replace(/\/$/,""))}},189469:(e,t,i)=>{i.d(t,{r:()=>a});function a(e,t,i){return!!(e&&e.trim().length>0&&t&&!i)}},391884:(e,t,i)=>{i.d(t,{Z:()=>a});function a({embedSrc:e,embedType:t,imagesUrls:i,preferredResolution:a,excludeOriginals:n}){if(!e&&!t&&!i)return"";if("gif"===t)return e||"";if(!i)return"";if(a){let e="474x"===a&&i["474x"]||"236x"===a&&i["236x"]||i["736x"];if(e)return e}let l=Object.keys(i).reduce((e,t)=>{try{let a=t.split("x")[0];if(Number.isNaN(Number(a)))return{...e,[t]:i[t]};return{...e,[a]:i[t]}}catch(t){return e}},{}),r=Object.keys(l);return n&&"orig"===r[r.length-1]&&r.pop(),l[r.pop()]||""}},777609:(e,t,i)=>{i.d(t,{Z:()=>s});var a,n=i(667294);i(167912);var l=i(986631);let r=void 0!==a?a:a=i(222267);function s({pinKey:e,maxWidth:t}){let i=(0,l.Z)(r,e),a=i?.imageSpec_564x||i?.imageSpec_736x||i?.imageSpec_orig||i?.imageSpec_474x||i?.imageSpec_236x,s=a?.width||1,o=a?.height||1,d=a?.url||"",u=function(e,t,i=564){return e>i&&(t*=i/e,e=i),{width:e,height:t}}(s,o,t);return{getNormalizedPinImage:(0,n.useCallback)(()=>({width:u.width,height:u.height,url:d}),[u.height,u.width,d])}}},781705:(e,t,i)=>{i.d(t,{Z:()=>s}),i(167912);var a,n=i(986631),l=i(140017);let r=void 0!==a?a:a=i(853708),s=e=>{let t;let i=(0,l.ZP)(),a=(0,n.Z)(r,e),s=a.trackedLink||a.link||a.imageSpec_orig&&a.imageSpec_orig.url,{richMetadata:o,richSummary:d}=a,u=i._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(u=i._('Product sold by ', 'pin annotation', 'pin annotation'),t=(o.products?.[0]||void 0)?.offerSummary),!t&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(u=i._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:s,pinCreditPrefix:u,pinTitle:a.closeupUnifiedTitle,pinDescription:a.closeupUnifiedDescription,pinCategory:a.category}}},661428:(e,t,i)=>{i.d(t,{Z:()=>r}),i(167912);var a,n=i(986631);let l=void 0!==a?a:a=i(890030),r=e=>{let t=(0,n.Z)(l,e);return[["60x60",t?.imageSpec_60x60],["136x136",t?.imageSpec_136x136],["170x",t?.imageSpec_170x],["236x",t?.imageSpec_236x],["474x",t?.imageSpec_474x],["564x",t?.imageSpec_564x],["736x",t?.imageSpec_736x],["600x315",t?.imageSpec_600x315],["orig",t?.imageSpec_orig]].reduce((e,[t,i])=>i?{...e,[t]:i.url}:e,{})}},414131:(e,t,i)=>{i.d(t,{Z:()=>a});function a({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:i,hasPinRichMetadataArticle:a,hasPinRichMetadataRecipe:n,hasPinStoryPinData:l}){if(e){if(t)return i?144:a?141:n?145:139;if(l)return 157}return 140}},493538:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(760890),n=i(667294),l=i(107860),r=i(906623),s=i(438555);function o({children:e,isAtEndOfFeed:t,pinData:i,itemCount:o,includeBackgroundImages:d=!1,includeVideos:u=!1,includeSections:c=!1,isPlaceholderGrid:p}){return s.Z()?.isAuthenticated||(c=!0),(0,a.Z)({pinData:i,isAtEndOfFeed:t,includeBackgroundImages:d,includeVideos:u,includeSections:c,isPlaceholderGrid:p}),!function(e){let t=(0,r.E)(),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{e!==i.current&&(i.current=e,t&&(0,l.ZP)(l.at))},[!!t,e])}(o),e}},760890:(e,t,i)=>{i.d(t,{Z:()=>f,v:()=>m});var a=i(667294),n=i(685679),l=i(608029),r=i(367180),s=i(297329),o=i(107860),d=i(906623),u=i(279600),c=i(748058);let p=(0,l.XV)("GridProfiler"),m=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,r.VZ)(),g=e=>"LAYOUT"===e.status&&500||"TIMING"===e.status&&100||null,h=(e,t)=>{if(!t){let t=(0,r.LM)();if(t===e)return p("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,r.F9)())return p("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}},_=(e,t)=>{let i=0,a=0,n=0,l=0,r=0;return e=e.filter(e=>"pin"===e.type),t.forEach((t,s)=>{let o;let d=t.fileName.split(".")[0];o=e[s],d!==o?.image_signature&&(o=e.find(e=>d===e?.image_signature)),void 0===o?r+=1:o.is_promoted||o.recommendation_reason?.reason==="PROMOTED_PIN"||o?.promoter?.length?n+=1:null!==o.story_pin_data_id&&void 0!==o.story_pin_data_id?i+=1:o?.videos?.video_list?a+=1:l+=1}),{storyPinCount:i,videoCount:a,adCount:n,imageCount:l,unknownCount:r}},y=(e,t)=>{let i=()=>{window.removeEventListener(e,i),t()};return window.addEventListener(e,i),()=>window.removeEventListener(e,i)};function f({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:i,includeVideos:m=!1,includeSections:f,isPlaceholderGrid:v}){let x=(0,d.E)(),b=x?.getId(),S=x?.setVisuallyCompleteResult,[w,k]=(0,a.useState)({status:"DISABLED"});(0,a.useEffect)(()=>{S?k({status:"LAYOUT",failedCount:0,numOfItemsChecked:0}):k({status:"DISABLED"})},[b,S]),(0,a.useEffect)(()=>{if("DISABLED"!==w.status&&(0,o.ZP)(`GridVisuallyCompleteProfiler_${w.status}`),p("new status",w),"LAYOUT"===w.status){let e=y("scroll",()=>{(0,o.ZP)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[w.status]),(0,c.Z)(()=>{if(!x||!S)return;let{abort:a,getMetricId:o}=x,d=o(),c=(0,r.cQ)(i,m,f);if(v&&!c.length){p("bypassing PWT run due to skeleton pin grid");return}switch(w.status){case"LAYOUT":{let t=h(w.numOfItemsChecked,e);t.complete?k({status:"TIMING",failedCount:0,pinElements:c}):500*w.failedCount>6e4?((0,s.A9)(`images.${(0,n.KJ)(d)}.visuallyComplete.maxLayoutAttempt`),a("visuallyComplete_layoutTimeout"),k({status:"DISABLED"})):k({...w,failedCount:w.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,u.Cg)(),i=w.pinElements.length,r=[],o=0,c=0,m=0;if(w.pinElements.forEach(({element:t,fileName:i})=>{let a=e.find(e=>e.name.endsWith(i));a?a.responseEnd?(r.push(a),(0,l.v5)(t,"green")):(m+=1,(0,l.v5)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(c+=1,(0,l.v5)(t,"red")):(o+=1,(0,l.v5)(t,"greenyellow"))}),o||m)100*w.failedCount>6e4?((0,s.A9)(`images.${(0,n.KJ)(d)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:i,incompleteCount:o,noTimingCount:c,noTimingResponseEndCount:m}}),a("visuallyComplete_timingTimeout"),k({status:"DISABLED"})):k({...w,failedCount:w.failedCount+1});else{if(p(`All ${r.length} images are fetched`),t&&t.length){let e=_(t,w.pinElements);Object.entries(e).forEach(([e,t])=>{x.addBinaryAnnotation(e,t,"I16")}),(0,s.A9)(`${(0,n.KJ)(d)}.pinTypes`,{tags:e})}S({imageTimings:r}),k({status:"DISABLED"}),(0,s.A9)(`images.${(0,n.KJ)(d)}.visuallyComplete.complete`,{tags:{totalImageCount:i,noTimingCount:c}})}}}},g(w))}},686769:(e,t,i)=>{i.d(t,{A:()=>s,Z:()=>o});var a=i(667294),n=i(883119),l=i(923368),r=i(785893);let s=({fill:e})=>{let t="half"===e?(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(n.xu,{position:"absolute",children:(0,r.jsx)(n.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:15})}),(0,r.jsx)(n.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:15})]}):(0,r.jsx)(n.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:15});return(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},"data-test-id":`rating-star-${e}`,display:"inlineBlock",children:t})};function o({max_rating:e,rating:t}){var i;let{peekCloseupEnabled:a}=(0,l.x4)(),o=[],d=parseFloat(e)||5,u=5*(i=(i=parseFloat(t)||0)<=d?i:d)/d;if(Number.isNaN(u))return null;let c=Math.floor(u),p=u-c;return[...Array(c).keys()].forEach(e=>o.push((0,r.jsx)(s,{fill:"full"},e))),p>=.75?o.push((0,r.jsx)(s,{fill:"full"},o.length)):p>=.25&&o.push((0,r.jsx)(s,{fill:"half"},o.length)),[...Array(5-o.length).keys()].forEach(()=>o.push((0,r.jsx)(s,{fill:"empty"},o.length))),(0,r.jsx)(n.xu,{display:a?"flex":"inlineBlock",position:"relative",width:18*d,children:o})}},496782:(e,t,i)=>{i.d(t,{Z:()=>m});var a=i(667294),n=i(883119),l=i(230556),r=i(140017),s=i(427514),o=i(785893);function d({category:e,ingredients:t,textSize:i="300"}){return(0,o.jsxs)(n.xu,{children:[e&&(0,o.jsx)(n.xu,{children:(0,o.jsx)(n.xv,{size:i,weight:"bold",children:e})}),(0,o.jsx)("ul",{children:t.map((e,t)=>(0,o.jsx)("li",{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",children:(0,o.jsx)(n.xu,{marginTop:1,children:(0,o.jsxs)(n.xv,{size:i,children:[" ",e.amt||null," ",e.name]})})},t))})]})}var u=i(177021),c=i(153896),p=i(923368);function m({recipeProps:e,marginOverrides:t}){var i;let m=(0,r.ZP)(),{image:g,name:h,categorizedIngredients:_}=e.recipe,{isCloseupRelatedPinsAboveTheFoldEnabled:y,peekCloseupEnabled:f}=(0,p.x4)(),v=0;if(_&&_.length){let e=[];_.forEach(t=>(v+=t.ingredients.length,e.push(t.ingredients)))}let x=f?(i=v,(0,s.Z)(m.ngettext('{{ count }} Ingredient', '{{ count }} Ingredients', i, 'closeup.recipePin.heading.ingredientCount', 'Ingredient count on a Pin. count: number of ingredients'),{count:i.toString()})):m._('Ingredients', 'Ingredients title and count in closeup recipe description', 'Ingredients title and count in closeup recipe description');return(0,o.jsx)(n.xu,{marginBottom:y?2:void 0,marginTop:y?2:8,children:(0,o.jsxs)(u.Z,{itemScope:!0,itemType:"https://schema.org/Recipe",children:[(0,o.jsx)("meta",{content:h,itemProp:"name"}),(0,o.jsx)("meta",{content:g,itemProp:"image"}),(0,o.jsx)(c.Z,{heading:x,children:(0,o.jsx)(n.xu,{marginTop:y?void 0:4,children:_.map(({category:e,ingredients:i},r)=>{let s=`ingredient-${r}`;return(0,o.jsx)(a.Fragment,{children:(0,o.jsx)(n.xu,{marginBottom:t?.ingredientMarginBottom||4,children:(0,o.jsx)(d,{category:e,ingredients:i,textSize:y?"200":l.n})})},s)})})})]})})}},230077:(e,t,i)=>{i.d(t,{Z:()=>s});var a=i(667294),n=i(545007),l=i(839967),r=i(569372);function s(e){let{name:t,optionsKey:i}=e,s=t===l.fY,o=(0,r.bC)(),d=o?.get(t,i);if(d)throw d;let u=e=>e[t]?.[i],c=(0,n.v9)(({resources:e})=>u(e)?.nextBookmark),p=(0,n.v9)(({resources:e})=>u(e)?.data),m=(0,n.v9)(({resources:e})=>u(e)?.auxData),g=(0,n.v9)(({resources:e})=>u(e)?.error),h=(0,a.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(s)return h.current;let _={auxData:m,data:p,error:g,isAtEnd:c===l.qx,nextBookmark:c};return(_.auxData!==h.current.auxData||_.data!==h.current.data||_.error!==h.current.error||_.isAtEnd!==h.current.isAtEnd||_.nextBookmark!==h.current.nextBookmark)&&(h.current=_),h.current}},826267:(e,t,i)=>{i.d(t,{Z:()=>l});var a=i(839967),n=i(637253);function l(e){let{enabledRouteRefresh:t,headers:i,name:l,noCache:r,options:s,schema:o}=e??{name:a.fY,options:null},d=!e,{fetchResource:u,ref:c}=(0,n.Z)({enabledRouteRefresh:t,headers:i,name:l,noCache:r,options:s,schema:o},d,!1);return d||u(),c}},177021:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(785893);let n=e=>{let t=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return(0,a.jsx)("div",{"data-test-id":"rich-pin-information",...t,children:e.children||null})}},241552:(e,t,i)=>{i.d(t,{l:()=>l,r:()=>r});var a=i(667294);let n=(0,a.createContext)(null),l=()=>(0,a.useContext)(n),r=n.Provider},48481:(e,t,i)=>{i.d(t,{Z:()=>l});var a=i(877457),n=i(241552);let l=()=>{let e=(0,a.g)(),t=(0,n.l)();return i=>{let{mobileOptions:a,desktopOptions:n,reason:l,attributionLabel:r,pinId:s}=i;e?e.showDesktopSignupModal({signupFlow:n?.modalType==="login"?{type:"login"}:{type:"signup"},reason:l,attributionLabel:r,...n?.modalOptions}):t&&t.showMobileSignupModal({reason:l,attributionLabel:r,headingType:a?.headingType??"none",pinId:s})}}},156725:(e,t,i)=>{i.d(t,{Z:()=>a});function a(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)}},627408:(e,t,i)=>{i.d(t,{Z:()=>x});var a=i(667294),n=i(883119),l=i(541841),r=i(901855),s=i(59545),o=i(340523),d=i(5859),u=i(520893),c=i(503325);let{Provider:p,useMaybeHook:m}=(0,i(342513).Z)("timeSpentContext");var g=i(28449),h=i(19447),_=i(785893);function y(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f extends a.Component{constructor(e){super(e),y(this,"componentWillUnmount",()=>{this.unregisterComponent()}),y(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:i,objectId:a,timeSpentContext:n,view:l,viewParameter:r}=this.props;return{view:l||n?.view,viewParameter:r||n?.viewParameter,component:t||n?.component,element:i,objectId:a||n?.objectId,clientTrackingParams:e||n?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),y(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),y(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0}),y(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),y(this,"getTimedPair",()=>this.state.timedPair),y(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),y(this,"isRegistered",!1),y(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),y(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),y(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:i,left:a,right:n,top:l}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===i&&0===a&&0===n&&0===l?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new c.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,u.Z)(e.auxData,this.props.auxData)&&(0,u.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverExpEnabled:t,intersectionObserverBoxHeight:i}=this.props;return t?(0,_.jsx)(p,{value:this.getContext(),children:(0,_.jsx)(s.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:t=>(0,_.jsx)(n.xu,{ref:t,height:i??"100%",children:a.Children.only(e)})})}):(0,_.jsx)(p,{value:this.getContext(),children:(0,_.jsx)(l.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:a.Children.only(e)})})}}function v(e){let t=(0,r.Hv)(),i=m(),n=(0,g.Z)(),l=(0,h.H0)(),{requestIdentifier:s="",isAuthenticated:u}=(0,d.B)(),c={app_instance_id:s.slice(0,8),...e.auxData??{}},{checkExperiment:p}=(0,o.F)(),y=p(u?"web_intersection_observer_migration_auth":"web_intersection_observer_migration_unauth").anyEnabled;return(0,a.useEffect)(()=>{n?.setHistoryStackContext(t)},[t,n]),(0,a.useEffect)(()=>{n?.setPins(l??{})},[l,n]),n?(0,_.jsx)(f,{...e,auxData:c,intersectionObserverExpEnabled:y,timeSpentContext:i,timeSpentManager:n,children:e.children}):e.children}v.displayName="TimeSpent";let x=v},503325:(e,t,i)=>{i.d(t,{Z:()=>s,h:()=>r});var a=i(172045),n=i(17314);function l(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let r="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now(),s=class{constructor(e){l(this,"start",()=>(this.startTime=r(),this.startTime)),l(this,"end",()=>(this.endTime=r(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration));try{this.uuid=(0,a.Z)()}catch(e){this.uuid=(0,n.Z)()}e&&Object.assign(this,e)}}},28449:(e,t,i)=>{i.d(t,{$:()=>a,Z:()=>l});let{Provider:a,useMaybeHook:n}=(0,i(342513).Z)("TimeSpentManagerContext"),l=n},623409:(e,t,i)=>{i.d(t,{Z:()=>d});var a=i(667294),n=i(616550),l=i(741983),r=i(389638),s=i(217058);let o=e=>(0,l.L6)(e)?"pin":(0,l.am)(e)?"board":(0,l.Xn)(e)?"login":(0,l.C$)(e)?"home":(0,r.Z)(e)?"profile":(0,l.dr)(e)?"ideas":(0,l.gT)(e)?"ideas-root":(0,l.tZ)(e)?"videos":(0,l.Q0)(e)?"videos-category":(0,l.$Y)(e)?"article":(0,l.E0)(e)?"shopping-spotlight":(0,l.Zz)(e)?"today":(0,l.j8)(e)?"unauth-profile":(0,l.f1)(e)?"shopping-root":(0,l.OX)(e)?"shopping-category":"other";function d(){let e=(0,n.TH)();return(0,a.useCallback)(({action:t,item:i,within:a})=>{let n=o(e);(0,s.My)(`logged_out_product.interaction.${n}.${t}`,{item:i||"none",within:a||"none"})},[e])}},460270:(e,t,i)=>{i.d(t,{Z:()=>a});let a=e=>e?"string"==typeof e?e:e.pathname?e.pathname:"":""},689390:(e,t,i)=>{i.d(t,{Z:()=>a});function a(e){if((e||"").includes("--")){let t=e.split("--"),i=t.pop();return{text:t.join("--"),pinId:i}}return{text:"",pinId:e}}},748058:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(667294);let n=(e,t)=>{let i=(0,a.useRef)(()=>{});(0,a.useEffect)(()=>{i.current=e},[e]),(0,a.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>i.current(),t);return()=>clearInterval(e)},[t])}},369708:(e,t,i)=>{i.d(t,{W:()=>u,r:()=>d});var a=i(667294),n=i(214877),l=i(342513),r=i(340523),s=i(785893);let{Provider:o,useHook:d}=(0,l.Z)("VideoPlayer");function u({children:e}){let{logContextEvent:t,logImpression:i}=(0,n.v)(),{checkExperiment:l}=(0,r.F)(),[d,u]=(0,a.useState)(!1),[c,p]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),[h,_]=(0,a.useState)({}),y=l("web_ads_mrc_video_impression").anyEnabled,f=e=>{_(t=>({...t,[e]:!0}))},v=(0,a.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:t}=e.event_data.pinImpressions[0],i=(e.aux_data?.commerce_data||"").includes("story_pin_id");y&&(t||i)&&p(t=>[...t,e].slice(-1e3))}},[y]),x=(0,a.useCallback)(e=>{18===e.eventType&&y&&g(t=>[...t,e].slice(-1e3))},[y]),b=e=>{let{time:t}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:t,renderDuration:0}]}}},S=e=>{if(e.eventData){let{time:t}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:t??0}}}return null};(0,a.useEffect)(()=>{let e=c.filter(e=>{let{pinIdStr:i}=e.event_data.pinImpressions[0];return!h[i]||!y||(t(b(e)),!1)});e.length!==c.length&&p(e)},[c,y,t,h]),(0,a.useEffect)(()=>{let e=m.filter(e=>{let t=e.eventData?.pinIdStr;if(!t)return!1;if(h[t]&&y){let t=S(e);return t&&i(t),!1}return!0});e.length!==m.length&&g(e)},[m,y,i,h]);let w=(0,a.useMemo)(()=>({captionsEnabled:d,logMrcVideoAdImpressionOnPlay:x,logMrcVideoAdEventOnPlay:v,setCaptionsEnabled:u,setVideoPlayed:f,videosPlayed:h}),[d,v,x,h]);return(0,s.jsx)(o,{value:w,children:e})}},250790:(e,t,i)=>{i.d(t,{Z:()=>a});function a(e){let t;switch(e){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=5;break;case 6:t=6}return t}},40770:(e,t,i)=>{i.d(t,{Z:()=>a});function a({cropSource:e,surfaceType:t,isProductPage:i}){return"stl"===t&&4===e?"shop_the_look_module":i?"feed_module":null}},258194:(e,t,i)=>{i.d(t,{Z:()=>a});function a({cropArea:e,cropSource:t,requestParams:i,searchQuery:a,surfaceType:n,title:l,trafficSource:r}){let s=[];if(e){let{x:t,y:i,w:a,h:n}=e;t>=0&&i>=0&&a>=0&&n>=0&&s.push(`x=${t}`,`y=${i}`,`w=${a}`,`h=${n}`)}return t&&s.push(`cropSource=${t}`),n&&s.push(`surfaceType=${n}`),l&&s.push(`full_feed_title=${encodeURIComponent(l)}`),a&&s.push(`q=${a}`),r&&"unknown"!==r&&s.push(`rs=${r}`),i&&s.push(`requestParams=${encodeURIComponent(i)}`),s.length?`?${s.join("&")}`:""}},755453:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(258194);function n({cropArea:e,cropSource:t,isProductPage:i,pinId:n,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:d}){let u=(0,a.Z)({cropArea:e,cropSource:t,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:d}),c="";return i&&(c="products/"),`/pin/${n}/visual-search/${c}${u}`}},909728:(e,t,i)=>{i.d(t,{$:()=>n,B:()=>a});let{Provider:a,useHook:n}=(0,i(342513).Z)("SurfaceContext",{surface:"Unknown"})},213503:(e,t,i)=>{i.d(t,{Z:()=>k}),i(167912);var a,n=i(883119),l=i(587703),r=i(986631),s=i(140017),o=i(340523),d=i(48481),u=i(217058),c=i(623409),p=i(13848),m=i(554786),g=i(494125),h=i(149722),_=i(735728),y=i(358589),f=i(386008),v=i(155087),x=i(155117),b=i(785893);let S=({children:e,pulsar:t,testId:i})=>t.show?(0,b.jsx)(n.xu,{"data-test-id":i,position:"relative",children:(0,b.jsxs)(n.iP,{onTap:t.onClick,tapStyle:"none",children:[(0,b.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"-75px"}},marginTop:-5,position:"absolute",children:e}),(0,b.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"-83px"}},marginTop:-12,position:"absolute",children:(0,b.jsx)(n.o3,{})})]})}):(0,b.jsx)(n.xu,{"data-test-id":i,children:e}),w=void 0!==a?a:a=i(106398);function k({auxData:e,disabled:t,disableLog:i,followEventType:a,id:k,inline:P,invertColors:T,isFollowed:E,isIdeaPin:I,isLegoEnabled:F,isSecondaryButton:C,isUserFollowButton:A,isUserMe:R,onFollow:j,onUnfollow:O,pinKey:L,shouldUseLegoColors:D,showPulsar:N,size:K,textType:M="FollowFollowing",unfollowEventType:Z,viewParameter:z,viewType:U,clientTrackingParams:G}){let H;let V=(0,s.ZP)(),B=(0,m.HG)(),{showToast:W}=(0,p.F9)(),Y=(0,c.Z)(),$=(0,l.Z)(),Q=(0,d.Z)(),{checkExperiment:q}=(0,o.F)(),X=(0,y.Z)(),J=(0,h.Z)(),ee=J&&J.isAuth,{unauthFollowUserId:et,setUnauthFollowUserId:ei}=(0,x.f)(),ea=(0,f.mN)()(k),en=ea&&{imageMediumUrl:ea.image_medium_url,username:ea.username},el=(0,r.Z)(w,L),er=el?.linkDomain,es=el?.nativeCreator,eo=el?.originPinner,ed=el?.pinner;H=es||(er?er.officialUser:eo||ed);let eu=en??H;(0,g.Z)(()=>{!B&&ee&&et&&k&&et===k&&j(k)});let ec=X({fn:()=>{ee?E?(O(k),i||$({event_type:Z,view_type:U,view_parameter:z,object_id_str:k,aux_data:e,clientTrackingParams:G})):(j(k),A&&W(({hideToast:e})=>{let t=eu?.username?`/${eu.username}/`:"";return(0,b.jsx)(v.Z,{handleHide:e,href:t,imageUrl:eu?.imageMediumUrl||"",text:(0,b.jsx)(n.xv,{lineClamp:4,children:V._('Following! Their created Pins will show up in your home feed!', 'followButton.follow.informationalToastText', 'Text explaining that a creator\'s Pins will show up in home feed after follow')}),userId:k})}),i||$({event_type:a,view_type:U,view_parameter:z,object_id_str:k,aux_data:e,clientTrackingParams:G})):((0,u.NC)(E?"press_profile_unfollow":"press_profile_follow"),Y({action:"click",item:E?"unfollow-button":"follow-button"}),Q({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:I?"click_idea_pin_follow":"click_follow",desktopOptions:{modalType:"signup",modalOptions:B&&q("pcons_dweb_contextual_follow_modal").anyEnabled?{source:"followButton",container:"follow"}:void 0},mobileOptions:!B&&q("pcons_mweb_contextual_follow_modal").anyEnabled?{headingType:"follow"}:void 0}),B||ei(k??""),(0,u.NC)("clickthrough"))},modalHeader:(0,_.N4)({i18n:V,toFollow:!E})}),ep=!E&&!!N,em=()=>{if(R)return V._('That\'s you!', 'Follow button is disabled because this is you', 'Follow button is disabled because this is you');if("AddRemove"===M)return E?V._('Remove', 'unfollowButton.removeText', 'Follow button label - followed state, so user can click to "remove" the follow'):V._('Add', 'followButton.addText', 'Follow button label - unfollowed state, so user can click to "add" the follow');let e="FollowUnfollow"===M?V._('Unfollow', 'unfollowButton.unfollowText', 'Follow button label - followed state, so user can click to "unfollow" the follow'):V._('Following', 'Follow button label - followed state', 'Follow button label - followed state');return E?e:V._('Follow', 'Follow button label - unfollowed state', 'Follow button label - unfollowed state')};return(0,b.jsx)(S,{pulsar:ep?{show:!0,onClick:ec}:{show:!1},testId:R||E?"board-unfollow-button":"board-follow-button",children:(0,b.jsx)(n.zx,{accessibilityLabel:em(),color:D||"AddRemove"===M||!F&&C||T?"gray":"red",disabled:R||t,fullWidth:P,onClick:ep?void 0:({event:t})=>{t.preventDefault(),t.stopPropagation(),i||$({event_type:101,component:13672,element:11951,object_id_str:k,view_type:U,view_parameter:z,aux_data:e,clientTrackingParams:G}),ec()},selected:E||!1,size:K,text:em()})})}},407996:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(883119),n=i(140017),l=i(785893);let r=({isInModal:e})=>{let t=(0,n.ZP)();return(0,l.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, .5)"}},display:"flex",height:"100%",justifyContent:"center",left:!0,position:e?"absolute":"fixed",top:!0,width:"100%",zIndex:new a.Ry(1),children:(0,l.jsx)(a.$j,{accessibilityLabel:t._('Loading', 'Full page loading state', 'Full page loading state'),show:!0})})}},83255:(e,t,i)=>{i.d(t,{E:()=>a,Z:()=>l});let{Provider:a,useHook:n}=(0,i(342513).Z)("VerticalNav",{width:0}),l=n},589564:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(83255);function n(){let{width:e}=(0,a.Z)();return e}},563322:(e,t,i)=>{i.d(t,{ET:()=>s,UQ:()=>o,dv:()=>d,xZ:()=>c,yh:()=>p});var a,n=i(667294),l=i(342513),r=i(785893);let s={NONE:"NONE",GROUP:"GROUP",SECRET:"SECRET",ARCHIVED:"ARCHIVED"},o={NONE:0,ARCHIVED:1,GROUP:2,SECRET:3},d=((a={}).COLORS="COLORS",a.CREATED_BY_ME="CREATED_BY_ME",a.FAVORITED="FAVORITED",a.FAVORITED_AND_CREATED="FAVORITED_AND_CREATED_BY_ME",a.INTERESTS="INTERESTS",a.NONE="",a),{Provider:u,useMaybeHook:c}=(0,l.Z)("ProfileViewContext");function p({children:e}){let[t,i]=(0,n.useState)(),[a,l]=(0,n.useState)(new Map),[s,o]=(0,n.useState)(),[c,p]=(0,n.useState)(),[m,g]=(0,n.useState)(d.NONE),[h,_]=(0,n.useState)(0),[y,f]=(0,n.useState)(),v=(0,n.useCallback)((e,t)=>{l(new Map(a.set(e,t)))},[a]),x=(0,n.useMemo)(()=>({boardPinDensity:t,boardSortOrder:a,profileBoardView:s,profilePinDensity:c,profileFollowingSelectedIndex:h,selfProfilePinFilter:m,setBoardPinDensity:i,setSelfProfilePinFilter:g,updateBoardSortOrder:v,selfProfileBoardFilter:y,setSelfProfileBoardFilter:f,setProfileBoardView:o,setProfilePinDensity:p,setProfileFollowingSelectedIndex:_}),[t,a,s,c,h,m,y,v]);return(0,r.jsx)(u,{value:x,children:e})}},386008:(e,t,i)=>{i.d(t,{Tt:()=>c,cm:()=>u,kW:()=>o,kY:()=>p,mN:()=>d});var a=i(545007),n=i(342513),l=i(149722),r=i(785893);let{Provider:s,useHook:o}=(0,n.Z)("Users");function d(){let e=o();return t=>e[t]}function u(){let e=o();return(t,i=!1)=>{let a=Object.keys(e).find(i=>e[i].username===t);if(a||!i)return e[a??""]}}function c(){let{id:e}=(0,l.Z)();return o()[e??""]}function p({children:e}){let t=(0,a.v9)(({users:e})=>e,a.wU);return(0,r.jsx)(s,{value:t,children:e})}},774812:(e,t,i)=>{i.d(t,{G:()=>h,Z:()=>y});var a=i(667294),n=i(883119),l=i(775089),r=i(213377),s=i(493538),o=i(823987),d=i(554786),u=i(494125),c=i(771881),p=i(685321),m=i(187156),g=i(785893);let h=25;function _(e){return e?.storyType==="recommended_boards_module"?{sm:2,md:2,lg:3,xl:4}:1}function y({customLayoutType:e,emptyState:t,feedItems:i,feedKey:h,maxColumns:y,minColumns:f,pagination:{hasNext:v,isLoadingNext:x,loadNext:b,refetch:S},pullToRefresh:w,renderFeedItem:k,serverRender:P}){let T=(0,d.HG)(),[E,I]=(0,a.useState)(!1),F="userSearch"===e?window.innerWidth-16:200,C=x&&0===i.length&&!E,A="desktopFlashlight"===e?0:r.qG,R=f??2;return"userSearch"===e&&(R=1),(0,u.Z)(()=>(window.addEventListener("online",b),()=>window.removeEventListener("online",b))),(0,g.jsxs)(n.xu,{"data-test-id":"MobileFeed",children:[(0,g.jsx)(p.Z,{enabled:!!w,onPull:()=>{S(),I(!0)},refreshing:E}),(0,g.jsxs)(n.xu,{"data-test-id":"grid",marginEnd:A,marginStart:A,opacity:E?.5:1,children:[(0,g.jsx)(s.Z,{isAtEndOfFeed:!v,itemCount:i.length,children:i.length?(0,g.jsx)(n.xu,{"data-test-id":"feed",marginTop:(0,c.kk)({isDesktop:T}),children:(0,g.jsx)(o.Z.Consumer,{children:e=>(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(c.c$,{children:(0,g.jsx)(l.default,{_getColumnSpanConfig:_,cacheKey:h,columnWidth:T?r.yF:F,gutterWidth:T?4*r.jC:void 0,id:P?h:void 0,items:i,loadItems:b,maxColumns:y,minCols:R,optOutFluidGridExperiment:null!=y,renderItem:({data:e,itemIdx:t})=>k(e,t),scrollContainerRef:e,serverRender:P})})})})}):x?(0,g.jsx)(c.gG,{}):t??null}),C&&(0,g.jsx)(n.xu,{column:12,paddingY:2,children:(0,g.jsx)(m.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},155117:(e,t,i)=>{i.d(t,{f:()=>s,w:()=>o});var a=i(667294),n=i(342513),l=i(785893);let{Provider:r,useHook:s}=(0,n.Z)("Session");function o({children:e}){let[t,i]=(0,a.useState)(void 0),n=(0,a.useCallback)(()=>i(void 0),[]),s=(0,a.useMemo)(()=>({unauthFollowUserId:t,setUnauthFollowUserId:i,removeUnauthFollowUserId:n}),[t,n]);return(0,l.jsx)(r,{value:s,children:e})}},801690:(e,t,i)=>{i.d(t,{Z:()=>d});var a=i(667294),n=i(525364),l=i(105737),r=i(766311),s=i(785893);class o extends a.Component{componentDidMount(){let{setCurrentPageData:e,viewData:t,viewParameter:i,viewType:a}=this.props;e({viewData:t,viewParameter:i,viewType:a})}componentDidUpdate(e){let{setCurrentPageData:t,viewData:i,viewParameter:a,viewType:n}=this.props;a===e.viewParameter&&n===e.viewType&&(0,l.ZP)(i,e.viewData)||t({viewData:i,viewParameter:a,viewType:n})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){let{auxData:e,children:t,component:i,objectIdStr:a,viewData:n,viewParameter:l,viewType:o,clientTrackingParams:d}=this.props;return(0,s.jsx)(r.Z,{auxData:e,clientTrackingParams:d,component:i,objectIdStr:a,viewData:n,viewParameter:l,viewType:o,children:t})}}function d(e){let{setViewContextData:t,clearViewContextData:i}=(0,n.sV)();return(0,s.jsx)(o,{...e,clearCurrentPageData:i,setCurrentPageData:t})}},766311:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(667294),n=i(587703),l=i(217058);let r=e=>Object.keys(e).reduce((t,i)=>(void 0===e[i]&&delete t[i],t),{...e}),s=({viewType:e,viewParameter:t,viewData:i,auxData:a,objectIdStr:n,component:s,clientTrackingParams:o,element:d},u)=>{let c=r({event_type:13,view_type:e,view_parameter:t,view_data:i,aux_data:a,object_id_str:n,component:s,clientTrackingParams:o,element:d});-1===Object.keys(c).indexOf("view_type")&&(0,l.My)("mweb.logging.null_view_type"),u(c)};function o(e){let{auxData:t,clientTrackingParams:i,children:l,component:r,element:o,objectIdStr:d,viewData:u,viewParameter:c,viewType:p}=e,m=(0,n.Z)(),g=JSON.stringify(t),h=JSON.stringify(u);return(0,a.useEffect)(()=>{s(e,m)},[m,g,i,r,o,d,h,c,p]),a.Children.only(l)}},153896:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(667294),n=i(883119),l=i(160408),r=i(214877),s=i(5859),o=i(554786),d=i(923368),u=i(785893);function c({auxData:e,children:t,collapseButtonElementType:i,collapseByDefault:c=!0,componentType:p,displayViewState:m,expandButtonElementType:g,forceTappableHeader:h,headerHeight:_,headerPaddingRight:y,headerPreview:f,heading:v,surface:x,viewParameter:b,viewType:S}){let w=(0,o.HG)(),{isBot:k}=(0,s.B)(),{logContextEvent:P}=(0,r.v)(),{isCloseupRelatedPinsAboveTheFoldEnabled:T,setIsShoppingModuleExpanded:E}=(0,d.x4)(),I=(0,a.useRef)(null),[F,C]=(0,a.useState)(!k&&c||[1,2].includes(m));return(0,a.useEffect)(()=>{E&&E(!F)},[]),(0,u.jsxs)(n.kC,{dataTestId:"collapsible-layout",direction:"column",gap:w&&T?0:4,children:[(0,u.jsx)(l.Z,{collapsed:F,displayViewState:m,forceTappableHeader:h,headerHeight:_,headerPaddingRight:y,headerPreview:f,heading:v,onClick:()=>{C(!F),E&&E(F),P({aux_data:e,component:p,element:F?g:i,event_type:w?101:102,view_parameter:b,view_type:S})},showArrow:!0,surface:x}),w&&T?(0,u.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transition:T?"height 600ms cubic-bezier(.25,1,.5,1)":void 0}},"data-test-id":`collapsible-layout-content-${F?"collapsed":"expanded"}`,height:F?"0px":`${I?.current?.scrollHeight}px`,marginBottom:T&&!F?1:void 0,overflow:"hidden",children:(0,u.jsx)(n.xu,{ref:I,children:t})}):!F&&(0,u.jsx)(n.xu,{children:t})]})}},923368:(e,t,i)=>{i.d(t,{Nb:()=>s,Of:()=>o,YO:()=>r,ZP:()=>c,x4:()=>u});var a=i(667294),n=i(891162),l=i(392029);let r=({showProductDetailPage:e,isLargerPane:t,showCloseupContentRight:i})=>e&&t?i?l.Uj:l.zT:1,s=(0,n.qe)(({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showProductDetailPage:a,viewportSize:n,maxWidth:l,descriptionPaneWidth:r,inCommentFooterRedesignExp:s,isCloseupRelatedPinsAboveTheFoldEnabled:o,isCommentAttachmentSelectorOpen:d,isCommentThreadExpanded:u,isMediaViewerOpen:c,isPinNoteExpanded:p,isProductDetailsExpanded:m,isShoppingModuleExpanded:g,setIsCommentAttachmentSelectorOpen:h,setIsCommentThreadExpanded:_,setIsMediaViewerOpen:y,setIsPinNoteExpanded:f,setIsProductDetailsExpanded:v,setIsShoppingModuleExpanded:x,closeupWithinMasonryEnabled:b,peekCloseupEnabled:S,isInRemoveMagnifyingGlassVariant:w,setAbortNoActionPlacementTimeout:k,clientTrackingParams:P,isCloseupMediaViewerOpen:T,setIsCloseupMediaViewerOpen:E})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showProductDetailPage:a,viewportSize:n,maxWidth:l,descriptionPaneWidth:r,isCommentAttachmentSelectorOpen:d,inCommentFooterRedesignExp:s,isCloseupRelatedPinsAboveTheFoldEnabled:o,isCommentThreadExpanded:u,isCloseupMediaViewerOpen:T,isMediaViewerOpen:c,isPinNoteExpanded:p,isProductDetailsExpanded:m,isShoppingModuleExpanded:g,setIsCommentAttachmentSelectorOpen:h,setIsCommentThreadExpanded:_,setIsCloseupMediaViewerOpen:E,setIsMediaViewerOpen:y,setIsPinNoteExpanded:f,setIsProductDetailsExpanded:v,setIsShoppingModuleExpanded:x,closeupWithinMasonryEnabled:b,peekCloseupEnabled:S,isInRemoveMagnifyingGlassVariant:w,setAbortNoActionPlacementTimeout:k,clientTrackingParams:P})),o={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:l.Gg,pdpCarouselSlotToPaneRatio:1,maxWidth:l.u6,descriptionPaneWidth:l.u6-l.Gg,inCommentFooterRedesignExp:!1,isCloseupRelatedPinsAboveTheFoldEnabled:!1,isCommentAttachmentSelectorOpen:!1,isCommentThreadExpanded:!1,isCloseupMediaViewerOpen:!1,isMediaViewerOpen:!1,isPinNoteExpanded:!1,isShoppingModuleExpanded:!1,closeupWithinMasonryEnabled:!1,peekCloseupEnabled:!1,isInRemoveMagnifyingGlassVariant:!1,setAbortNoActionPlacementTimeout:()=>{},setIsCloseupMediaViewerOpen:()=>{},setIsCommentAttachmentSelectorOpen:()=>{},setIsMediaViewerOpen:()=>{},setIsShoppingModuleExpanded:()=>{}},d=(0,a.createContext)(o);function u(){let e=(0,a.useContext)(d);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}let c=d},392029:(e,t,i)=>{i.d(t,{$T:()=>f,CI:()=>r,Ch:()=>o,ER:()=>y,Gb:()=>d,Gg:()=>n,Hf:()=>b,Ie:()=>m,KP:()=>g,Kn:()=>s,O5:()=>v,Uj:()=>u,bx:()=>h,d2:()=>p,g9:()=>_,iB:()=>S,rv:()=>x,u6:()=>l,zT:()=>c});var a=i(883119);let n=508,l=1016,r=488,s=992,o=672,d=1176,u=.6,c=.84,p=40,m=72,g=740,h=912,_=32,y=16,f=24,v=2,x=1,b=new a.Ry(5),S={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},237040:(e,t,i)=>{i.d(t,{Yg:()=>o,ib:()=>u,nF:()=>p,xX:()=>c});var a=i(340523),n=i(5859),l=i(554786),r=i(953565);let s=({checkExperiment:e})=>{let{group:t}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,i)=>(0,r.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:t,...i}})}},o=()=>{let{isAuthenticated:e}=(0,n.B)(),t=(0,l.HG)(),{checkExperiment:i}=(0,a.F)();return e&&!t?s({checkExperiment:i}):{logStat:()=>{}}},d=0,u=({checkExperiment:e,isAuthMweb:t})=>{if(!t)return;let{logStat:i}=s({checkExperiment:e});(d+=1)<10&&i(`repin_${d}`)};function c({checkExperiment:e,isDesktop:t,isAuthenticated:i}){if(!i)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};if(t){let{anyEnabled:t}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:t,isGraphQLEnabledInGeneral:t,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1}}{let{anyEnabled:t,group:i}=e("auth_mweb_graphql_pin_page");switch(i){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"only_impression_fix":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"enabled_and_impression_fix":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"only_related_pins":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"only_related_pins_and_impression_fix":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"should_render_with_missing_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"render_and_subscribe":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingDataAndSubscribe",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"add_related_pins_latency":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!0};default:return{isGraphQLEnabledInGeneral:t,isGraphQLEnabledForRelatedPins:t,closeupPageSuspenseBehavior:t?"SuspendOnMissingData":null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1}}}}function p(){let{checkExperiment:e}=(0,a.F)(),t=(0,l.HG)(),{isAuthenticated:i}=(0,n.B)();return c({checkExperiment:e,isDesktop:t,isAuthenticated:i})}},572345:(e,t,i)=>{i.d(t,{O:()=>c,Z:()=>p});var a=i(667294),n=i(883119),l=i(140017),r=i(340523),s=i(702497),o=i(909728),d=i(785893);let u={xs:12,sm:16,md:20,lg:24};function c({children:e}){let t=(0,l.ZP)();return(0,d.jsx)(n.u,{link:(0,d.jsx)(n.rU,{href:s.vBy,target:"blank",children:(0,d.jsx)(n.xv,{color:"inverse",size:"100",weight:"bold",children:t._('Learn more', 'verifiedBadge.tooltip.link', 'Learn more about Pinterest\'s Merchant Guidelines')})}),text:t._('This retailer meets Pinterest\'s Merchant Guidelines', 'merchantVerification.badge.tooltip', 'Badge indicating that a merchant or user is verified'),children:e})}function p({iconOnly:e,isVerifiedIdentity:t,isVerifiedMerchant:i,showText:s,size:p}){let m=(0,l.ZP)(),{checkExperiment:g}=(0,r.F)(),{surface:h}=(0,o.$)(),_=(0,d.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[(0,d.jsx)(n.JO,{accessibilityLabel:m._('Merchant verification badge icon', 'merchantVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"shopping",icon:"workflow-status-ok",inline:!0,size:u[p]}),s&&(0,d.jsx)(n.xu,{marginStart:2,children:(0,d.jsx)(n.xv,{color:"shopping",inline:!0,weight:"bold",children:m._('Verified merchant', 'creator.header.verifiedMerchant', 'this merchant is a verified merchant')})})]});if((t||i)&&(!h||h&&["AuthHomefeed","RelatedPinGrid","SearchItem","BaseBoardPinGrid"].includes(h))&&"enabled_att_trusted_merchants_and_verified_creators_only"===g("simplify_creator_attributions_web").group)return(0,d.jsx)(a.Fragment,{});let{group:y}=g("simplify_creator_attributions_web");switch(y){case"enabled_att_trusted_merchant_blue_checkmark":return(0,d.jsxs)(a.Fragment,{children:[i&&!e&&(0,d.jsx)(c,{children:_}),i&&e&&_]});case"enabled_att_creators_with_red_checkmarks":return(0,d.jsx)(a.Fragment,{children:t&&(0,d.jsx)(n.JO,{accessibilityLabel:m._('Domain verification icon', 'domainVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"error",icon:"check-circle",size:u[p]})});default:return(0,d.jsxs)(a.Fragment,{children:[i&&!e&&(0,d.jsx)(c,{children:_}),i&&e&&_,t&&!i&&(0,d.jsx)(n.JO,{accessibilityLabel:m._('Domain verification icon', 'domainVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"error",icon:"check-circle",size:u[p]})]})}}},822592:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(883119),n=i(67664),l=i(785893);function r({coverImages:e,height:t,isHovered:i,onClick:r,onMouseEnter:s,onMouseLeave:o,textType:d,text:u,url:c,width:p}){let m=e&&(e["236x"]||e["280x280"]);return(0,l.jsx)(n.Z,{backgroundColor:"gray",coverImage:m,height:t,isHovered:i,onClick:r,onMouseEnter:s,onMouseLeave:o,url:c,width:p,children:(0,l.jsx)(a.xu,{alignItems:"center",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:"text"===d?(0,l.jsx)(a.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,l.jsx)(a.X6,{align:"center",color:"light",size:"500",children:u})}):(0,l.jsx)(a.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,l.jsx)(a.xv,{align:"center",weight:"bold",children:u})})})})}},67664:(e,t,i)=>{i.d(t,{A:()=>r,Z:()=>s});var a=i(667294),n=i(883119),l=i(785893);let r={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function s({backgroundColor:e,children:t,coverImage:i,disableTabIndex:s,height:o,id:d,isHovered:u,onClick:c,onMouseDown:p,onMouseEnter:m,onMouseLeave:g,searchBoxRenderStopwatch:h,url:_,width:y}){let[f,v]=(0,a.useState)(!1),x=()=>{m?m():v(!0)},b=()=>{g?g():v(!1)},S=u||f,w=S?r.hoverOverlay:r.bubbleOverlay;return(0,l.jsx)(n.Tg,{href:_,onBlur:b,onFocus:x,onMouseDown:p,onMouseEnter:x,onMouseLeave:b,onTap:()=>{c?.(d)},rounding:4,tabIndex:s?-1:void 0,children:(0,l.jsx)(n.zd,{height:o,rounding:4,width:y||"100%",children:i?.url?(0,l.jsxs)(n.Ee,{alt:"",color:e,fit:"cover",naturalHeight:i.height??1,naturalWidth:i.width??1,onLoad:()=>{h?.stop()},role:"presentation",src:i.url,children:[(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:w},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:S}):t]}):(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},270766:(e,t,i)=>{i.d(t,{Z:()=>eE});var a,n,l,r,s,o,d=i(667294);i(167912);var u=i(616550),c=i(883119),p=i(986631),m=i(673500),g=i(140017),h=i(340523),_=i(757640),y=i(689390),f=i(867013),v=i(735382),x=i(82205),b=i(205841),S=i(339001),w=i(217058),k=i(785893);let P=void 0!==a?a:a=i(894595),T=()=>{(0,w.NC)("click_best_pin_board",!0)},E=()=>{(0,w.NC)("click_best_pin_profile",!0)},I=({pin:e})=>{let{pinner:t}=e,{username:i,fullName:a}=t??{},n=t?.imageMediumUrl||t?.imageSmallUrl,l=`/${i??""}/`;return(0,k.jsx)(c.Tg,{fullWidth:!1,href:l,onTap:E,rounding:"circle",children:(0,k.jsx)(b.qE,{name:a??"",outline:!0,size:"sm",src:n??""})})},F=({pin:e})=>{let t=(0,g.ZP)(),{board:i,pinner:a}=e,{name:n,privacy:l,url:r}=i??{},s=i?.entityId||"",{username:o,fullName:d}=a??{},u=`/${o??""}/`,p=(0,k.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,k.jsx)(c.rU,{display:"inlineBlock",href:u,onClick:E,underline:"hover",children:d})},d);return"protected"===l?(0,S.nk)(t._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:p}):(0,S.nk)(t._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:p,boardName:(0,k.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:(0,k.jsx)(c.rU,{href:r??"",onClick:T,children:n},"board")},s)})},C=({pinKey:e})=>{let t=(0,p.Z)(P,e);return(0,k.jsxs)(c.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,k.jsx)(I,{pin:t}),(0,k.jsx)(c.xu,{marginEnd:2}),(0,k.jsx)(c.xv,{size:"200",children:(0,k.jsx)(F,{pin:t})})]})},A=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},R=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")};var j=i(587703);function O({pageType:e,pinCreditPrefix:t,pin:i,pinLink:a,viewParameter:n}){let l=(0,g.ZP)(),r=(0,j.Z)();if("topic"!==e.page&&(!i.domain||"Uploaded by user"===i.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!i.nativeCreator,d=o?i.nativeCreator?.fullName:i.domain;return(0,k.jsx)(c.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,k.jsx)(c.rU,{display:"inlineBlock",href:o?`/${i.nativeCreator?.username||""}/`:a,onClick:()=>{"topic"===e.page?(0,w.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:i.entityId,component:85,view_parameter:n})},rel:"nofollow",target:"blank",underline:"hover",children:(0,k.jsx)(c.xv,{size:s,children:(0,S.nk)(l._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:t,pinCredit:(0,k.jsx)(c.xv,{inline:!0,size:s,weight:"bold",children:"topic"!==e.page?(0,k.jsxs)("span",{onBlur:R,onFocus:A,onMouseLeave:R,onMouseOver:A,children:[" ",i.domain]}):d},o?"creatorProfile":"pinLinkDomain")})})})})}var L=i(92785),D=i(388769),N=i(391884),K=i(189469),M=i(567344),Z=i(781705),z=i(661428),U=i(414131),G=i(496782),H=i(686769);let V=void 0!==n?n:n=i(200932);function B({recipeKey:e}){let t=(0,p.Z)(V,e);if(t?.aggregateRating?.ratingValue&&t.aggregateRating.reviewCount){let e="number"==typeof t.cookTimes?.cook?.m&&"number"==typeof t.cookTimes.prep?.m?`${t.cookTimes.cook.m+t.cookTimes.prep.m} minutes \xb7 `:"";return(0,k.jsxs)(d.Fragment,{children:[(0,k.jsx)(H.Z,{max_rating:t.aggregateRating.bestRating,rating:t.aggregateRating.ratingValue},t.aggregateRating.ratingValue),(0,k.jsx)(c.xv,{inline:!0,size:"200",children:` ${t.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var W=i(5859);let Y=void 0!==l?l:l=i(340359),$=e=>{let t=null;e.lastRepinDate&&(t=new Date(e.lastRepinDate));let i=null;return(e.createdAt&&(i=new Date(e.createdAt)),t)?i?t>i?t:i:t:i},Q=e=>{let t="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return t;let i=$(e);if(i&&i.getFullYear()===new Date().getFullYear()){let a=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:n}=e;a.has(n)&&(t=i?(0,k.jsx)(L.Z,{dateFormatType:L.k.LONG_MONTH_YEAR,useUTC:!1,value:i}):"")}return t},q=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),X=(e,t)=>{let i=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),a=i.getTime(),n=new Date().getTime();return null==t||n-a<=31536e6*t?(0,k.jsx)(L.Z,{dateFormatType:L.k.LONG_MONTH_YEAR,useUTC:!1,value:i}):""};function J(e){let{pinKey:t,viewportSize:i,pageType:a}=e,n=(0,p.Z)(Y,t),{pinCreditPrefix:l,pinLink:r}=(0,Z.Z)(n),s=(0,z.Z)(n),{description:o}=(0,M.eK)({richMetadataDescription:n.richMetadata?.description,richSummaryDisplayName:n.richSummary?.displayName,closeupUnifiedDescription:n.closeupUnifiedDescription});"videos_category"===a.page&&(o=(0,M.kt)(o,n.nativeCreator?.username||""));let d="wide"===i,u=(0,M.Ly)({pinTitle:n.title,gridTitle:n.gridTitle,richSummaryDisplayName:n.richSummary?.displayName??"",richMetadataTitle:n.richMetadata?.title??"",storyPinDataId:n.storyPinDataId,storyPinDataMetadataPinTitle:n.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:n.pinJoin?.visualAnnotation});(n.gridTitle||"").trim()&&u!==n.gridTitle&&(u=(0,M.EU)(n.gridTitle,200));let m=(0,K.r)(n.richMetadata?.recipe?.name,!!n.richMetadata?.recipe?.categorizedIngredients,n.richMetadata?.recipe?.fromAggregatedData??!1)?n.richMetadata?.recipe:null,g=q(n)&&X(n,2),h=Q(n)||g,{isBot:_,isSocialBot:y}=(0,W.B)();return(0,k.jsx)(c.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,k.jsxs)(c.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,k.jsx)(O,{pageType:a,pin:{entityId:n.entityId,domain:n.domain||"",nativeCreator:n.nativeCreator&&{fullName:n.nativeCreator.fullName,username:n.nativeCreator.username}},pinCreditPrefix:"topic"===a.page&&n.nativeCreator?"Created by":l,pinLink:r??"",viewParameter:(0,U.Z)({hasPin:!0,hasPinRichMetadata:!!n.richMetadata,hasPinRichMetadataProducts:!!n.richMetadata?.products,hasPinRichMetadataArticle:!!n.richMetadata?.article,hasPinRichMetadataRecipe:!!n.richMetadata?.recipe,hasPinStoryPinData:!!n.storyPinData})}),(0,k.jsx)(c.kC,{direction:"row",justifyContent:"between",children:(0,k.jsx)(c.xu,{display:"flex",marginEnd:d?0:3,marginTop:d?3:0,overflow:"hidden",children:u&&(0,k.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:600,fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u})})}),h?(0,k.jsx)(c.xu,{marginTop:1,children:(0,k.jsx)(c.xv,{color:"subtle",children:h})}):null,o&&(0,k.jsx)(c.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,k.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[m&&(0,k.jsx)(B,{recipeKey:m}),o]})}),m&&(0,k.jsx)(G.Z,{marginOverrides:m?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:m.categorizedIngredients,name:m.name,image:(0,N.Z)({imagesUrls:s,embedSrc:n.embed?.src,embedType:n.embed?.type,excludeOriginals:!_&&!y})}}}),(0,k.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:[(0,k.jsx)(C,{pinKey:n}),(0,k.jsx)(c.kC,{alignItems:"stretch",justifyContent:"end",children:!n.repinCount||n.repinCount<1?null:(0,k.jsxs)(c.kC,{alignItems:"center",justifyContent:"start",children:[(0,k.jsx)(c.JO,{accessibilityLabel:"Pin",color:"subtle",icon:"pin",size:12}),(0,k.jsx)(c.xv,{color:"default",inline:!0,size:"100",children:(0,k.jsx)(D.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:n.repinCount})})]})})]})]})})}var ee=i(922725),et=i(631785),ei=i(741983),ea=i(777609),en=i(627408),el=i(623409),er=i(160567),es=i(624797),eo=i(494125),ed=i(129675),eu=i(520846),ec=i(258194),ep=i(755453),em=i(676554),eg=i(125768),eh=i(774812);let e_=0,ey="",ef=void 0!==r?r:r=i(572621);function ev(e){let{imageSpec_564x:t,imageSpec_orig:i,imageSignature:a}=e,n=t&&i,{url:l}=n??{},r=n?.width??1,s=n?.height??void 0;return"number"==typeof r&&"number"==typeof s&&r>564&&(s*=564/r,r=564),{width:r,height:s,url:l,imageSignature:a}}let ex=({data:e,index:t,viewParameter:i,productsURL:a})=>{switch(e.type){case"pin":return(0,k.jsx)(em.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:t,viewParameter:i,viewType:72});case"story":return a&&(0,k.jsx)(x.Z,{dangerouslySetActionUrl:a,slotIndex:t,story:e});default:return null}},eb=({resourceOptions:e})=>{let t=(0,g.ZP)(),{data:i,isAtEnd:a,isFetching:n,fetchMore:l}=(0,_.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,u.TH)(),s=`${r.pathname}products/${r.search}`;return(0,k.jsxs)(d.Fragment,{children:[i&&(0,k.jsx)(eh.Z,{customLayoutType:"desktopFlashlight",feedItems:i.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:l,hasNext:a,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>ex({data:e,index:t,viewParameter:3050,productsURL:s})}),(0,k.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:n})]})},eS=({resourceOptions:e})=>{let t=(0,g.ZP)(),{data:i,isAtEnd:a,isFetching:n,fetchMore:l}=(0,_.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,k.jsxs)(d.Fragment,{children:[i&&(0,k.jsx)(eh.Z,{customLayoutType:"desktopFlashlight",feedItems:i||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:l,hasNext:a,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>ex({data:e,index:t,viewParameter:3334})}),(0,k.jsx)(c.$j,{accessibilityLabel:t._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:n})]})};function ew({pinKey:e}){let t=(0,g.ZP)(),{isRTL:i}=(0,W.B)(),a=(0,j.Z)(),n=(0,u.k6)(),l=(0,u.TH)(),r=(0,d.useRef)(),s=(0,u.$B)(),o=(0,el.Z)(),{pinId:m}=(0,y.Z)(s.params.id||""),h=(0,es.mB)(l.search),_=(0,v.Z)(l),x=function(e){let t=parseInt(e??"",10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}}(h.cropSource),b=(0,ei.hd)(l),S=(0,p.Z)(ef,e),{getNormalizedPinImage:w}=(0,ea.Z)({pinKey:S});if((0,d.useEffect)(()=>{if(!_&&S){let{width:e,height:t}=w(),i=(0,ep.Z)({cropArea:{h:t-2*ee.S,w:e-2*ee.S,x:ee.S,y:ee.S},isProductPage:b,pinId:m,surfaceType:"flashlight"});n.replace(i)}},[w,n,_,b,S,m]),(0,eo.Z)(()=>{a({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:m}})}),(0,d.useEffect)(()=>{let e=r.current;return e&&ey===m&&(e.scrollTop=e_),()=>{e&&(e_=e.scrollTop,ey=m)}}),!S)return(0,k.jsx)(en.Z,{objectId:"",view:72,children:(0,k.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:er.Pw}},position:"relative",children:(0,k.jsx)(c.$j,{accessibilityLabel:t._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})})});let{imageSignature:P,description:T}=S,{width:E,height:I,url:F}=ev(S),C=function({initialCropArea:e,pin:t}){let i;if(e)i={...e};else{let{visualObjects:e}=t,{width:a=1,height:n=1}=ev(t);if(e&&e.length){let{x:t,y:l,w:r,h:s}=e[0];i=(0,eu.Z)({cropArea:{x:t,y:l,w:r,h:s},scaledWidth:a,scaledHeight:n})}else{let[e,t]=[a/6,n/6],[l,r]=[a-2*e,n-2*t];i={x:e,y:t,w:l,h:r}}}return{x:Math.floor(i.x??0),y:Math.floor(i.y??0),w:Math.floor(i.w??0),h:Math.floor(i.h??0)}}({initialCropArea:_,pin:S}),A=l.state&&l.state.internalNavigation,R=E+f.n,O=(R??1)+24,L={pin_id:m,imageSignature:P,crop:(0,ed.Z)({cropArea:C,scaledWidth:E,scaledHeight:I}),crop_source:x||5},D={__style:{top:140}};return(0,k.jsx)(en.Z,{objectId:"",view:72,children:(0,k.jsxs)(d.Fragment,{children:[(0,k.jsxs)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new c.Ry(4),children:[(0,k.jsx)(c.xu,{left:!0,position:"absolute",children:(0,k.jsx)(eg.Z,{})}),(0,k.jsx)(c.xu,{flex:"grow",children:(0,k.jsx)(c.X6,{align:"center",size:"400",children:b?t._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):t._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})})]}),b?(0,k.jsx)(c.xu,{dangerouslySetInlineStyle:D,position:"relative",children:(0,k.jsx)(eS,{resourceOptions:L})}):(0,k.jsxs)(c.xu,{display:"flex",paddingX:12,children:[(0,k.jsxs)(c.xu,{ref:r,dangerouslySetInlineStyle:D,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:R,zIndex:new c.Ry(4),children:[(0,k.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{width:E,height:I}},"data-test-id":"flashlight-enabled-image",children:(0,k.jsxs)(c.zd,{height:I,rounding:2,width:E,children:[(0,k.jsx)(c.Ee,{alt:T??"",naturalHeight:I??1,naturalWidth:E??1,src:F??""}),(0,k.jsx)(et.Z,{customCropper:function({origCrop:e,cropSource:t}){let i=window.location.pathname+window.location.search,a=(0,ep.Z)({cropArea:e,cropSource:t??6,isProductPage:b,pinId:m,surfaceType:"flashlight"});o({action:"trigger",item:"cropper-changed",within:"flashlight-page"}),a!==i&&m&&n.replace({pathname:`/pin/${m}/visual-search/`,search:(0,ec.Z)({cropArea:e,cropSource:t??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:P??void 0,imageSize:{h:I,w:E},initialCropArea:C,pinKey:S,showAnimation:!A,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,k.jsx)(c.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:E??1,position:"relative",children:(0,k.jsx)(J,{pageType:{isAuth:!1,page:"flashlight"},pinKey:S,viewportSize:"narrow"})})]}),(0,k.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...D.__style,...i?{marginRight:`${O}px`}:{marginLeft:`${O}px`}}},position:"relative",width:"100%",children:(0,k.jsx)(eb,{resourceOptions:L})})]})]})})}let ek=void 0!==s?s:s=i(790602),eP=void 0!==o?o:o=i(343015);function eT(){let{checkExperiment:e}=(0,h.F)(),t=(0,u.$B)(),{pinId:i}=(0,y.Z)(t.params.id||""),a=e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled,n=(0,m.Z)({strategy:a?"GRAPHQL":"LEGACY",query:eP,variables:{pinId:i},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetPinQuery?.__typename==="V3GetPin"?e.v3GetPinQuery.data:null,useGetLegacyData:({pinId:e})=>(0,_.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}}).data}),l=(0,p.Z)(ek,n);return(0,k.jsx)(ew,{pinKey:l})}function eE(){let e=(0,g.ZP)();return(0,k.jsx)(d.Suspense,{fallback:(0,k.jsx)(c.$j,{accessibilityLabel:e._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,k.jsx)(eT,{})})}},735728:(e,t,i)=>{i.d(t,{N4:()=>l,Wh:()=>a,hr:()=>n});let a=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),n=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),l=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')},358589:(e,t,i)=>{i.d(t,{Z:()=>s});var a=i(140017),n=i(554786),l=i(166770),r=i(735728);let s=()=>{let e=(0,a.ZP)(),t=(0,n.HG)(),{viewer:i,loginForMore:s,limitedLoginModalSubheader:o,limitedLoginModalNextLocation:d}=(0,l.H)();return"LIMITED_LOGIN"===i.type?({modalHeader:i,nextLocation:a})=>n=>{let l=null;n&&(n.nativeEvent&&n.nativeEvent instanceof Event?l=n:n.event&&(l=n.event)),l&&(l.preventDefault&&l.preventDefault(),l.stopPropagation&&l.stopPropagation()),s?.setVisible(!0),o?.setText(i||(t?r.hr(e):r.Wh(e))),a&&d?.setRoute(a)}:({fn:e})=>e}},414141:(e,t,i)=>{i.d(t,{Z:()=>e4});var a,n,l,r,s,o,d,u,c,p,m,g,h=i(667294);i(167912);var _=i(616550),y=i(883119),f=i(510989),v=i(986631),x=i(673500),b=i(140017),S=i(340523),w=i(230077),k=i(826267),P=i(689390),T=i(407996),E=i(735382),I=i(922725),F=i(777609),C=i(513911);let A=void 0!==a?a:a=i(632349);var R=i(624797),j=i(250790),O=i(40770),L=i(129675),D=i(34202),N=i(757640),K=i(867013),M=i(214877),Z=i(901855),z=i(785893);function U({arrowType:e,pinId:t,viewParameter:i,viewType:a}){let n=(0,b.ZP)(),l=(0,_.k6)(),{previous:r}=(0,Z.Hv)(),{logContextEvent:s}=(0,M.v)();return(0,z.jsx)(y.xu,{"data-test-id":"go-back-button",children:(0,z.jsx)(y.hU,{accessibilityLabel:n._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(s({event_type:101,view_type:a,element:34,view_parameter:i}),0===r.length){l.replace(`/pin/${t}/`);return}l.goBack()}})})}var G=i(819429),H=i(30378),V=i(5859),B=i(71980);function W({buttonText:e,handleDrawerClose:t,isDrawerOpen:i,onClick:a,largeSize:n=!1,reversed:l=!1,invertWhenDrawerIsOpen:r=!1,hasProductFiltersApplied:s=!1}){let o=(0,b.ZP)(),d=r&&i,u=(0,z.jsx)(y.JO,{accessibilityLabel:"",color:d?"light":"dark",icon:"filter"},"filterIcon"),c=e&&(0,z.jsx)(y.xv,{align:"center",color:d?"inverse":"default",weight:"bold",children:e},e);return(0,z.jsx)(y.iP,{accessibilityLabel:o._('Filter', 'productsFilterButton', 'Button to filter products results'),onTap:()=>{i?t():a()},rounding:"pill",children:(0,z.jsxs)(y.xu,{position:"relative",children:[(0,z.jsx)(y.xu,{alignContent:"center",color:d?"dark":"secondary",dangerouslySetInlineStyle:n?{__style:{padding:"18px"}}:void 0,display:"flex",justifyContent:"center",minHeight:40,paddingX:4,rounding:"pill",children:(0,z.jsx)(y.kC,{alignItems:"center",gap:{row:2,column:0},children:l?[c,u]:[u,c]})}),s&&(0,z.jsx)(y.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",right:!0,rounding:"pill",top:!0})]})})}function Y({filtersText:e,handleDrawerClose:t,handleDrawerOpen:i,isDrawerOpen:a,isProductOnlyFeed:n,pinId:l,showFilter:r,title:s,viewParameter:o,viewType:d}){let{logContextEvent:u}=(0,M.v)(),{isRTL:c}=(0,V.B)(),p=(0,h.useRef)(null);(0,h.useEffect)(()=>(r&&u({event_type:120,view_type:d,component:13467,element:11735,view_parameter:o}),p.current&&H.Z.addObstruction("top",p.current),()=>{p.current&&H.Z.removeObstruction("top",p.current)}),[r]);let m=()=>{u({event_type:101,view_type:d,component:13467,element:11735,view_parameter:o}),i&&i()};return(0,z.jsx)(B.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,z.jsxs)(y.xu,{ref:p,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",justifyContent:"center",minHeight:60,position:"absolute",top:!0,width:"100%",children:[(0,z.jsx)(y.xu,{left:!c,marginStart:5,position:"absolute",right:c,children:(0,z.jsx)(U,{arrowType:n?"directional-arrow-left":"cancel",pinId:l,viewParameter:o,viewType:d})}),(0,z.jsx)(G.Z,{title:s}),r&&"boolean"==typeof a&&m&&e&&t&&(0,z.jsx)(y.xu,{"data-test-id":"filter-button",left:c,marginEnd:12,position:"absolute",right:!c,children:(0,z.jsx)(W,{buttonText:e,handleDrawerClose:t,isDrawerOpen:a,onClick:m})})]})})}var $=i(631785),Q=i(906623);let q=void 0!==n?n:n=i(239e3);function X({cropArea:e,description:t,height:i,imageSignature:a,imageUrl:n,pinId:l,pinKey:r,requestParams:s,showAnimation:o,surfaceType:d,trafficSource:u,viewParameter:c,width:p}){let m=(0,v.Z)(q,r),g=(0,Q.E)();return(0,z.jsx)(y.xu,{"data-test-id":"flashlight-enabled-image",height:i,width:p,children:(0,z.jsxs)(y.zd,{height:i,rounding:4,width:p,children:[(0,z.jsx)(y.Ee,{alt:t,naturalHeight:i,naturalWidth:p,onLoad:()=>{g&&g.markConstraintComplete("visualSearchMainPinImageRender")},src:n}),(0,z.jsx)($.Z,{imageSignature:a,imageSize:{h:i,w:p},initialCropArea:e,pinId:l,pinKey:m,requestParams:s,showAnimation:!!o,surfaceType:d,trafficSource:u,viewParameter:c})]})})}var J=i(706308);function ee(){let e=(0,Q.E)();return t=>{e&&t&&("remove"===t?e.removeConstraint("shoppingModuleRender"):"complete"===t&&e.markConstraintComplete("shoppingModuleRender"))}}var et=i(213377),ei=i(70903),ea=i(822592),en=i(676554);function el({action:e,component:t,dangerouslySetActionUrl:i,element:a,contextLogData:n,hasPwtConstraint:l,id:r,objects:s,surface:o,viewType:d,viewParameter:u}){let{logContextEvent:c}=(0,M.v)(),p=ee(),{url:m,text:g}=e||{},h=m&&g?e=>(0,z.jsx)(ea.Z,{coverImages:e.images,height:et.yF,onClick:()=>c({event_type:101,view_type:d,view_parameter:u,component:t,element:a,aux_data:{story_id:r,...n}}),text:g,url:i??m,width:et.yF},"actionBubble"):null,{containerRef:_,itemsToRender:f,actionItem:v}=(0,ei.n)({items:s,itemWidth:et.yF,itemGap:et.oX,actionItemType:h?"one":void 0});return l&&p&&p(f&&f.length>0?"complete":"remove"),(0,z.jsxs)(ei.Z,{containerRef:_,itemGap:et.oX,children:[f.map((e,i)=>(0,z.jsx)(y.xu,{"data-grid-item":"true",flex:"none",width:et.yF,children:(0,z.jsx)(en.ZP,{authDesktopSurface:o??"ShoppingDynamicHeightGrid",auxData:n,componentType:t,duploQueryRef:null,pin:e,pinId:e.id,pinImageCrop:{height:et.yF,width:et.yF},slotIndex:i,viewParameter:u,viewType:d})},e.id)),v&&h?.(v)]})}function er({title:e}){return(0,z.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:55}},"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",children:(0,z.jsx)(y.X6,{accessibilityLevel:2,size:"400",children:e})})}var es=i(156725),eo=i(939809);let ed={flashlight:72,stela:427,stl:427};function eu({pinId:e,surfaceType:t,visualSearchFlashlightUnifiedResource:i}){let a=(0,_.TH)(),n=ee(),{data:l,isLoaded:r}=i,s=l?.results||[],o=t?ed[t]:72;n&&(!s&&r||s&&!s.some(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type))&&n("remove");let d=s.filter(e=>"story"===e.type);return(0,z.jsx)(h.Fragment,{children:d.map((t,i)=>{if("story"!==t.type)return null;let{action:n,id:l="",objects:r,story_type:s,title:d}=t,u=d?.format||"",c=(0,R.mB)(a.search),p=(0,R.mB)(n?.url).full_feed_title||"";c.full_feed_title=(0,es.Z)(p);let m=(0,R.XP)(c),g=`/pin/${e}/visual-search/products/?${m}`;switch(s){case"stela_shop":case"unified_visual_feed_product_upsell":return(0,z.jsx)(eo.qS,{auxData:{story_type:s},component:14339,loggingId:l,objectIdStr:l,slotIndex:i,viewParameter:3462,viewType:o,children:({impressionTrackerRef:e})=>(0,z.jsxs)(y.xu,{ref:e,children:[u&&(0,z.jsx)(er,{title:u}),(0,z.jsx)(y.xu,{"data-test-id":"unified-feed-stela-story",marginBottom:12,marginTop:4,children:(0,z.jsx)(el,{action:n,component:14339,contextLogData:{story_type:s},dangerouslySetActionUrl:g,element:179,hasPwtConstraint:!0,id:l,objects:r,surface:"ShoppingModule",viewParameter:3462,viewType:o})})]})},l);case"unified_visual_feed_organic_header":return(0,z.jsx)(eo.qS,{auxData:{story_type:s},component:14339,loggingId:l,objectIdStr:l,slotIndex:i,viewParameter:3462,viewType:o,children:({impressionTrackerRef:e})=>(0,z.jsx)(y.xu,{ref:e,marginBottom:4,children:(0,z.jsx)(er,{title:t?.title?.format||""})})},l);default:return null}})})}var ec=i(430062);let ep=void 0!==l?l:l=i(141027);function em({isFilterOpened:e,isProductOnlyFeed:t,pinKey:i,surfaceType:a,viewParameter:n,viewType:l,visualSearchFlashlightUnifiedResource:r}){let s=(0,v.Z)(ep,i),o="stl"===a,d=o||t,{data:u}=r,c=u?.search_identifier;return(0,z.jsxs)(h.Fragment,{children:[!o&&(0,z.jsx)(eu,{pinId:s.entityId,surfaceType:a,visualSearchFlashlightUnifiedResource:r}),(0,z.jsx)(ec.Z,{commerceData:{is_product_only_feed:d},isFilterOpened:e,isProductFeed:d,searchId:c,viewParameter:n,viewType:l,visualSearchFlashlightUnifiedResource:r})]})}var eg=i(785049),eh=i(207229),e_=i(549629),ey=i(689450),ef=i(627408),ev=i(494125),ex=i(339001),eb=i(755453);i(422578);var eS=i(268127);let ew=void 0!==r?r:r=i(899854);var ek=i(775089),eP=i(493538),eT=i(19447);let eE=({data:e,itemIdx:t})=>{let i=(0,eT.S6)(),a=(e.id?i(e.id):null)||e;return(0,z.jsx)(en.rX,{authDesktopSurface:"RelatedProductsFeed",duploQueryRef:null,pinId:a.id,pinKey:null!=a?{type:"deprecated",data:a}:null,slotIndex:t,viewParameter:3334,viewType:72})};function eI({visualLiveSearchProductFeedResourceData:e}){let t=(0,b.ZP)(),{data:i,isAtEnd:a,isLoaded:n,isFetching:l,fetchMore:r}=e,s=Array.isArray(i)?i:i?.results;return n?s&&0!==s.length?(0,z.jsx)(eP.Z,{isAtEndOfFeed:a,itemCount:s.length,children:(0,z.jsx)(ek.default,{columnWidth:et.yF,items:s,loadItems:()=>{l||a||r()},renderItem:e=>(0,z.jsx)(eE,{...e}),scrollContainer:()=>window,virtualize:!1})}):null:(0,z.jsx)(y.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,z.jsx)(y.$j,{accessibilityLabel:t._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})})}var eF=i(892254),eC=i(82205);let eA=void 0!==s?s:s=i(643229);function eR({pinKey:e,viewParameter:t,visualLiveSearchResourceData:i}){let a=(0,b.ZP)(),{hasSimplifiedPinGridExpLoaded:n}=(0,eF.$)(),l=(0,v.Z)(eA,e),{data:r,isFetching:s,fetchMore:o}=i,d=r?.results,u=r?.search_identifier;return(0,z.jsxs)(h.Fragment,{children:[d&&u&&(0,z.jsx)(y.Rk,{columnWidth:et.yF,items:d,loadItems:o,minCols:1,renderItem:({data:e,itemIdx:i})=>(function({data:e,itemIdx:i}){let a=`${window.location.pathname}products/${window.location.search}&full_feed_title=${encodeURIComponent("Shop similar items")}`;return"story"===e.type?(0,z.jsx)(eC.Z,{dangerouslySetActionUrl:a,slotIndex:i,story:e}):"pin"===e.type?(0,z.jsx)(en.ZP,{authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:u,image_signature:l.imageSignature},duploQueryRef:null,pin:e,pinId:e.id,slotIndex:i,viewData:{search_identifier:u},viewParameter:t,viewType:72}):null})({data:e,itemIdx:i}),scrollContainer:()=>window}),(0,z.jsx)(y.$j,{accessibilityLabel:a._('Loading search results...', 'FlashlightResultGrid.spinner', 'Accessibility label for loading visual search results'),show:s||!u||!n})]})}var ej=i(136359),eO=i(589564),eL=i(597553),eD=i(306320),eN=i(400119),eK=i(412421),eM=i(561916);function eZ({categoryFilters:e,cropSource:t,handleCategoryChange:i,viewParameter:a,viewType:n}){let{logContextEvent:l}=(0,M.v)(),r=(0,b.ZP)(),[s,o]=(0,h.useState)(!0);return(0,z.jsxs)(h.Fragment,{children:[(0,z.jsxs)(y.kC,{alignItems:"center",justifyContent:"between",children:[(0,z.jsx)(y.xv,{weight:"bold",children:r._('Product category', 'filter.category.header', 'Header of product category filter containing filter options')}),(0,z.jsx)(y.xu,{flex:"none",children:(0,z.jsx)(y.hU,{accessibilityLabel:r._('Product category', 'filter.category.button', 'accessibility label for the icon button to open or close domain filter'),icon:s?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{o(!s),l({event_type:101,component:13535,element:11547,view_type:n,view_parameter:a,aux_data:{commerce_data:JSON.stringify({filter:s?"collapsed":"expanded"})}}),s||l({event_type:13,component:13535,view_type:n,view_parameter:a,aux_data:{commerce_data:JSON.stringify({source:(0,eM.Z)({cropSource:t,viewType:n})})}})},size:"sm"})})]}),s?(0,z.jsx)(h.Fragment,{children:e.slice(0,5).map((e,t)=>(0,z.jsxs)(y.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,children:[(0,z.jsx)(y.xu,{flex:"grow",children:(0,z.jsx)(y.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,z.jsx)(y.xu,{children:(0,z.jsx)(y.hU,{accessibilityLabel:r._('Category Filter Option', 'filter.category.option', 'Accessibility label for radio button of category filter choices'),icon:e.checked?"check-circle":"circle",iconColor:"darkGray",onClick:()=>i(t),size:"sm"})})]},e.label))}):(0,z.jsx)(y.xu,{width:"80%",children:(0,z.jsx)(y.xv,{color:"subtle",size:"200",children:function(e=[],t){let i=e.filter(e=>e.checked),a=i.length;return 0===a?t._('All', 'filter.category.applied', 'text indicates that no categories filter is currently applied for filtering'):`(${a}) ${i.map(e=>e.label).join(", ")}`}(e,r)})})]})}var ez=i(490972);function eU(e,t){return e.filter(e=>e.checked).map(e=>e[t]).join(",")}function eG(e){return e.map(e=>({...e,checked:!1}))}function eH({listOfAvailableFiltersFromAPI:e,appliedFilterValues:t,key:i,component:a,viewType:n,viewParameter:l}){let{logContextEvent:r}=(0,M.v)(),[s,o]=(0,h.useState)([]),[d,u]=(0,h.useState)(""),[c,p]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{if(e){let a=eG(e),n=t?function(e,t,i){if(e){let a=decodeURI(e).split(",");return t.map(e=>a.includes(e[i])?{...e,checked:!0}:e)}return t}(t,a,i):a;o(n),u(eU(n,i))}},[e,t,i]),{filters:s,setFilters:o,submittedFilters:d,submitFilters:function(e){e!==d&&r({event_type:7472,component:a,view_type:n,view_parameter:l}),u(e),p(!1)},isFilterChanged:c,clearFilters:()=>eG(s),getSelected:e=>eU(e,i),handleFilterChange:function({index:e,pinId:t,auxCommerceData:u}){let c=!s[e].checked,m=[...s.slice(0,e),{...s[e],checked:c},...s.slice(e+1)];o(m),p(d!==eU(m,i)),r({event_type:101,component:a,element:11548,view_type:n,view_parameter:l,aux_data:{pin_id:t,commerce_data:JSON.stringify({[i]:s[e][i],select:c,...u})}})}}}function eV({categoryFilters:e,cropSource:t,domainFilters:i,drawerHeight:a,handleFilterChange:n,onSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:d,width:u,viewParameter:c,viewType:p}){let{logContextEvent:m}=(0,M.v)(),g=(0,b.ZP)();(0,ev.Z)(()=>{m({event_type:13,component:13467,view_type:p,view_parameter:c,aux_data:{commerce_data:JSON.stringify({source:(0,eM.Z)({cropSource:t,viewType:p})})}})});let{category:_,domain:f,max:v,min:x}=o||{},{filters:S,setFilters:w,submittedFilters:k,submitFilters:P,isFilterChanged:T,clearFilters:E,getSelected:I,handleFilterChange:F}=eH({listOfAvailableFiltersFromAPI:i,appliedFilterValues:f,key:"domain",component:13469,viewType:p,viewParameter:c}),{filters:C,setFilters:A,submittedFilters:R,submitFilters:j,isFilterChanged:O,clearFilters:L,getSelected:D,handleFilterChange:N}=eH({listOfAvailableFiltersFromAPI:e,appliedFilterValues:_,key:"label",component:13535,viewType:p,viewParameter:c}),[K,Z]=(0,h.useState)(s),[U,G]=(0,h.useState)(-1),[H,V]=(0,h.useState)(-1),[B,W]=(0,h.useState)(-1),[Y,$]=(0,h.useState)(-1),[Q,q]=(0,h.useState)(!1);(0,h.useEffect)(()=>{if(!s||v&&x||Z(s),x){let e=parseInt(x,10);$(e),V(e)}else V(s?.min_value??-1),$(s?.min_value??-1);if(v){let e=parseInt(v,10);W(e),G(e)}else G(s?.max_value??-1),W(s?.max_value??-1)},[s,v,x]);let{max_value:X,min_value:J,currency_type:ee}=K||{},et=e=>t=>{let i,a;let n=0>(t||0)?0:t;n&&m({event_type:7472,component:13468,view_type:p,view_parameter:c});let l=!1;"max"===e?(i=n||X,-1===(a=H)&&(a=J),a>i&&(a=Math.max(i-eD.$,0))):(a=n||0,-1===(i=U)&&(i=X),i<a&&(i=a+eD.$)),q(l=l||Y!==a||B!==i),V(a),G(i)};(0,h.useEffect)(()=>{d&&d(function({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:a},n){let l=n._('Filters', 'Filter icon button to open drawer containing price filter and domain filters on related products feed', 'Filter icon button to open drawer containing price filter and domain filters on related products feed'),r=function({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:a}){return(a||i?1:0)+(t?t.split(",").length:0)+(e?e.split(",").length:0)}({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:a}),s=r>0?` (${r})`:"";return`${l}${s}`}({categoryFilters:R,domainFilters:k,maxPrice:-1===B||B===X?void 0:B,minPrice:-1===Y||Y===J?void 0:Y},g))},[g,B,Y,R,k,d,X,J]);let ei=({categoryParam:e,domainParam:t,maxPrice:i,minPrice:a})=>{n({categoryParam:e,domainParam:t,maxPrice:-1!==i?i:void 0,minPrice:-1!==a?a:void 0}),W(i),$(a),q(!1),(B!==i||Y!==a)&&m({event_type:7472,component:13468,view_type:p,view_parameter:c}),P(t),j(e);let r=-1!==i,s=""!==t,o=""!==e,d=-1!==a?a.toString():"",u=r?i.toString():"",g=s?encodeURI(t):"",h=o?encodeURI(e):"";l&&l({category:h,domain:g,max:u,min:d})};return(0,z.jsxs)(h.Fragment,{children:[(0,z.jsxs)(y.xu,{direction:"column",display:"flex",height:a-50-70,overflow:"scroll",paddingX:1,paddingY:1,width:"100%",children:[(0,z.jsxs)(y.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,z.jsx)(y.xv,{weight:"bold",children:g._('Filter', 'shopping.filter.header', 'Header for the types of filters')}),(0,z.jsx)(y.zx,{onClick:()=>{G(-1),V(-1),w(E()),A(L()),ei({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),m({event_type:101,component:13467,element:11545,view_type:p,view_parameter:c})},size:"md",text:g._('Clear all', 'filter.clear.button', 'Button to clear all set filters on product group filters')})]}),!!K&&-1!==H&&-1!==U&&(0,z.jsx)(ez.Z,{children:(0,z.jsx)(eK.Z,{cropSource:t,currencyCode:ee,defaultMaxPrice:X,defaultMinPrice:J,disableAutoFormatOnChange:!0,handleMaxPriceChange:et("max"),handleMinPriceChange:et("min"),maxPrice:U,minPrice:H,uiType:"slider",viewParameter:c,viewType:p})}),!!C&&C.length>0&&4!==t&&(0,z.jsx)(ez.Z,{children:(0,z.jsx)(eZ,{categoryFilters:C,cropSource:t,handleCategoryChange:e=>{N({index:e,pinId:r})},viewParameter:c,viewType:p})}),!!S&&S.length>0&&(0,z.jsx)(ez.Z,{children:(0,z.jsx)(eN.Z,{cropSource:t,filterOptions:S,handleFilterChange:e=>{F({index:e,pinId:r,auxCommerceData:{source:(0,eM.Z)({cropSource:t,viewType:p})}})},showVerifiedMerchants:!0,uiType:"check-circles",viewParameter:c,viewType:p})})]}),(0,z.jsx)(y.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:u,children:(0,z.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},direction:"row",display:"flex",paddingY:2,children:(0,z.jsx)(y.xu,{marginStart:2,children:(0,z.jsx)(y.sg,{span:6,children:(0,z.jsx)(y.zx,{color:"red",dataTestId:"confirm-filters-button",disabled:!(T||O||Q),onClick:()=>{let e=I(S);ei({categoryParam:D(C),domainParam:e,maxPrice:U,minPrice:H}),m({event_type:101,component:13467,element:11546,view_type:p,view_parameter:c})},size:"md",text:g._('Apply', 'filter.apply.button', 'Button to submit all selected filter options'),type:"submit"})})})})})]})}function eB({categoryFilters:e,cropSource:t,domainFilters:i,isDrawerOpen:a,handleFilterChange:n,handleSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,topOffset:d=0,updateButtonText:u,viewParameter:c=3455,viewType:p}){let m=(0,ej.t)(),[g,_]=(0,h.useState)(0),f=()=>{_(window.innerHeight-m)};return(0,h.useEffect)(()=>(f(),window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[]),(0,z.jsx)(y.xu,{color:"default",dangerouslySetInlineStyle:{__style:{marginRight:a?0:-eL.pG,visibility:a?"visible":"hidden",top:m+d}},height:g,left:!0,paddingX:eL.VF,position:"fixed",width:eL.pG,zIndex:new y.Ry(2),children:(0,z.jsx)(eV,{categoryFilters:e,cropSource:t,domainFilters:i,drawerHeight:g,handleFilterChange:n,onSubmit:l,pinId:r,priceFilters:s,submittedFilters:o,updateButtonText:u,viewParameter:c,viewType:p,width:eL.pG-eL.VF*eL.vc*2})})}let eW=void 0!==o?o:o=i(5915);function eY(e){let{checkExperiment:t}=(0,S.F)(),i=(0,_.k6)(),a=(0,_.TH)(),n=(0,b.ZP)(),{width:l=0}=(0,eh.Z)()||{},r=(0,D.Z)(),{imageContainerScrollTop:s,imageContainerScrollTopForPinId:o}=(0,eg.t)(),{filters:d,pinKey:u,visualSearchFlashlightUnifiedResourceData:c,visualLiveSearchResourceData:p,visualLiveSearchProductFeedResourceData:m}=e,{cropArea:g,cropSource:f,entrySource:x,handleFilterChange:w,isProductPage:k,requestParams:P,searchQuery:T,submittedFilters:E,surfaceType:I,title:A,trafficSource:R}=r,{category_filters:j,domain_filters:O,price_filters:L}=d||{},N=(0,v.Z)(eW,u),{getNormalizedPinImage:M}=(0,F.Z)({pinKey:N,maxWidth:C.RZ}),Z=["stela","stl"].includes(I),{anyEnabled:U}=t("web_unified_visual_feed"),{anyEnabled:G}=t("web_flashlight_unified_feed"),{anyEnabled:H}=t("web_unified_visual_features_expansion"),V=function({cropSource:e,i18n:t,inFlashlightUFExperiment:i,inStelaUFExperiment:a,inUnifiedVisualFeaturesExpansion:n,isProductPage:l,surfaceType:r,title:s}){let o=t._('Image search', 'imageSearch.header', 'header explaining the results of image search'),d=t._('Shop the look', 'shopTheLook.header', 'User will see this Shop the look header when navigating from the Shop the look module'),u=(0,ex.nk)(t._('Shop {{ category }}', 'relatedProducts.stela.header', 'header for related products stela feed'),{category:(s||"").toLowerCase()}).join(""),c=4===e;if(l)return s;if("stl"===r)return c?d:o;let p=i&&"flashlight"===r,m=a&&["stela","stl"].includes(r);return n||p||m?c?"":o:c?u:o}({cropSource:f,i18n:n,inFlashlightUFExperiment:G,inStelaUFExperiment:U,inUnifiedVisualFeaturesExpansion:H,isProductPage:k,surfaceType:I,title:A}),[B,W]=(0,h.useState)(!1),[$,Q]=(0,h.useState)(""),q=(0,J.Z)(d),{state:ee}=a||{},{internalNavigation:ei=!1}=ee||{},{width:ea,height:en,url:el}=M(),er=ea+K.n,es=B?0:12,eo=(0,ej.t)(),ed=(0,eO.Z)(),eu=B?eL.pG:0,ec=k?0:er+4*es,ep=!k&&U&&"stela"===I,ek=!k&&G&&"flashlight"===I,eP=l-ed-eu-ec-K.n,eT=c?.data?.search_identifier||p?.data?.search_identifier||m?.data?.search_identifier||"",[eE,eF]=(0,h.useState)(eT);(0,h.useEffect)(()=>{eT&&eE!==eT&&eF(eT)},[eT,eE]);let eC=(0,h.useRef)(null);(0,ev.Z)(()=>{eC.current&&0!==s.current&&o.current===N.entityId&&(eC.current.scrollTop=s.current)});let eA=Z?427:"flashlight"===I?G&&k?427:72:427,eD=Z?4===f?3462:3455:"flashlight"===I?G&&4===f?3462:3050:3462,eN=function({entrySource:e,isProductPage:t,pinKey:i,surfaceType:a,viewParameter:n,viewType:l}){let{checkExperiment:r}=(0,S.F)(),{anyEnabled:s}=r("web_unified_visual_feed"),{anyEnabled:o}=r("web_flashlight_unified_feed"),d=(0,v.Z)(ew,i),u=(0,eS.Z)(d)({default:{is_product_only_feed:"stl"===a||t}});if(s||o)return{view_type:l,view_parameter:n,aux_data:u};if(!["stela","stl"].includes(a))return{view_type:l,view_parameter:3050,view_data:{pin_id:d.entityId}};{let t=(d.visualObjects||[]).some(e=>e.isStela);return{view_type:l,view_parameter:n,view_data:{pin_id:d.entityId},aux_data:{commerce_data:JSON.stringify({entrypoint:e,pin_is_stela:t})}}}}({entrySource:x,isProductPage:k,pinKey:N,surfaceType:I,viewParameter:eD,viewType:eA});return(0,z.jsx)(ey.Z,{constraints:function({isProductPage:e,isStl:t,isUnifiedFeed:i}){return e?[]:!i||t?["visualSearchMainPinImageRender"]:i?["shoppingModuleRender","visualSearchMainPinImageRender"]:[]}({isProductPage:k,isStl:"stl"===I,isUnifiedFeed:G||U||H}),measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,z.jsx)(ef.Z,{objectId:eE,view:eA,children:(0,z.jsx)(e_.Z,{log:eN,children:(0,z.jsxs)(y.xu,{"data-test-id":"related-products",children:[(0,z.jsx)(Y,{filtersText:$,handleDrawerClose:function(){W(!1)},handleDrawerOpen:function(){W(!0)},isDrawerOpen:B,isProductOnlyFeed:k,pinId:N.entityId,showFilter:!(ep||ek)&&Z&&q,title:V,viewParameter:eD,viewType:eA}),q&&(0,z.jsx)(eB,{categoryFilters:j,cropSource:f,domainFilters:O,handleFilterChange:w??(()=>{}),handleSubmit:function(){let e=(0,eb.Z)({cropArea:g,cropSource:f,isProductPage:k,pinId:N.entityId,requestParams:P,searchQuery:T,surfaceType:I,title:A,trafficSource:R});i.replace(e)},isDrawerOpen:B,pinId:N.entityId,priceFilters:L,submittedFilters:E,topOffset:60,updateButtonText:e=>{Q(e)},viewParameter:eD,viewType:eA}),!k&&(0,z.jsx)(y.xu,{ref:eC,bottom:!0,dangerouslySetInlineStyle:{__style:{top:eo+92,left:ed+eu,right:ed+eu}},height:"inherit",marginBottom:3,marginStart:es,onScroll:()=>{s.current=eC.current?.scrollTop||0,o.current=N.entityId},overflow:"auto",position:"fixed",width:er,children:(0,z.jsx)(X,{cropArea:g,description:N.description??"",height:en,imageSignature:N.imageSignature||"",imageUrl:el,pinId:N.entityId,pinKey:N,requestParams:P,showAnimation:!ei&&"flashlight"===I,surfaceType:I,trafficSource:R,viewParameter:eD,width:ea})}),(0,z.jsxs)(y.xu,{dangerouslySetInlineStyle:{__style:{top:92,left:eu+ec,right:eu+ec}},paddingX:et.jC,position:"relative",width:eP,children:[c&&(0,z.jsx)(em,{isFilterOpened:B,isProductOnlyFeed:k,pinKey:N,surfaceType:I,viewParameter:eD,viewType:eA,visualSearchFlashlightUnifiedResource:c}),!G&&p&&(0,z.jsx)(eR,{pinKey:N,viewParameter:eD,visualLiveSearchResourceData:p}),!G&&m&&(0,z.jsx)(eI,{visualLiveSearchProductFeedResourceData:m})]})]})})})})}let e$=void 0!==d?d:d=i(708537);function eQ(e){let{legacySearchId:t,pinKey:i,resourceOptions:a,setLegacySearchId:n}=e,l=(0,v.Z)(e$,i),r=(0,N.Z)({name:"VisualLiveSearchProductFeedResource",options:a}),s=r.data?.search_identifier||"";return(0,h.useEffect)(()=>{n&&s&&t!==s&&n(s)}),(0,z.jsx)(eY,{pinKey:l,visualLiveSearchProductFeedResourceData:r})}let eq=void 0!==u?u:u=i(977546);function eX(e){let{legacySearchId:t,pinKey:i,resourceOptions:a,setLegacySearchId:n}=e,l=(0,v.Z)(eq,i),r=(0,N.Z)({name:"VisualLiveSearchResource",options:a}),s=r.data?.search_identifier||"";return(0,h.useEffect)(()=>{n&&s&&t!==s&&n(s)}),(0,z.jsx)(eY,{pinKey:l,visualLiveSearchResourceData:r})}var eJ=i(8760);let e0=void 0!==c?c:c=i(270886);function e1(e){let{pinKey:t,resourceOptions:i}=e,a=(0,v.Z)(e0,t),{visualSearchFlashlightUnifiedResource:n,filters:l}=(0,eJ.Z)({resourceOptions:i});return(0,z.jsx)(eY,{filters:l,pinKey:a,visualSearchFlashlightUnifiedResourceData:n})}let e2=void 0!==p?p:p=i(196227);function e3({pinKey:e}){let{checkExperiment:t}=(0,S.F)(),i=(0,_.TH)(),a=(0,v.Z)(e2,e),{getInitialCropArea:n}=function({pinKey:e}){let t=(0,v.Z)(A,e),{getNormalizedPinImage:i}=(0,F.Z)({pinKey:t,maxWidth:C.RZ}),{width:a,height:n}=i();return{getInitialCropArea:(0,h.useCallback)(({initialCropArea:e})=>e||{x:I.S,y:I.S,w:a-2*I.S,h:n-2*I.S},[n,a])}}({pinKey:a}),{getNormalizedPinImage:l}=(0,F.Z)({pinKey:a,maxWidth:C.RZ}),{width:r,height:s}=l(),o=t("web_unified_visual_feed").anyEnabled||t("web_unified_visual_features_expansion").anyEnabled,d=t("web_flashlight_unified_feed").anyEnabled||t("web_unified_visual_features_expansion").anyEnabled,{cropSource:u,full_feed_title:c,surfaceType:p,category:m,domain:g,max:y,min:f,q:x,requestParams:b,rs:w}=(0,R.mB)(i.search),k=(0,j.Z)(Number(u))||5,P=n({initialCropArea:(0,E.Z)(i)}),T=i.pathname.includes("/products"),N=p||"flashlight",K=T||"stl"===N?"shopping":"flashlight",M=(0,O.Z)({cropSource:k,isProductPage:T,surfaceType:N}),[Z,U]=(0,h.useState)(parseInt(f,10)||null),[G,H]=(0,h.useState)(parseInt(y,10)||null),[V,B]=(0,h.useState)(g?decodeURI(g):null),[W,Y]=(0,h.useState)(m?decodeURI(m):null);function $({minPrice:e,maxPrice:t,domainParam:i,categoryParam:a}){U(e),H(t),B(i),Y(a)}let Q={categories:W,crop:(0,L.Z)({cropArea:P,scaledWidth:r,scaledHeight:s}),crop_source:k,domains:V,entry_source:K,entrypoint:M,field_set_key:"shopping_grid_item",image_signature:a.imageSignature||void 0,is_shopping:function({cropSource:e,inStelaUFExperiment:t,isProductPage:i,surfaceType:a}){return!!i||4===e&&("stl"===a||"stela"===a&&!t)}({cropSource:k,inStelaUFExperiment:o,isProductPage:T,surfaceType:N}),pin_id:a.entityId,price_max:G,price_min:Z,request_params:b,source:w},q=(0,h.useMemo)(()=>({cropArea:P,cropSource:k,entrySource:K,handleFilterChange:$,isProductPage:T,requestParams:b,searchQuery:x,submittedFilters:{category:m,domain:g,max:y,min:f},surfaceType:N,title:c,trafficSource:w}),[m,P,k,g,K,T,y,f,b,x,N,c,w]);if(!a)return null;let X="flashlight"!==N||d?(0,z.jsx)(e1,{pinKey:a,resourceOptions:Q}):T?(0,z.jsx)(eQ,{pinKey:a,resourceOptions:Q}):(0,z.jsx)(eX,{pinKey:a,resourceOptions:Q});return(0,z.jsx)(D.V,{value:q,children:X})}let e6=void 0!==m?m:m=i(194081),e5=void 0!==g?g:g=i(112649);function e7({pinId:e,relatedProductsDataRef:t}){let{checkExperiment:i}=(0,S.F)(),a=(0,b.ZP)(),n=i("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled,l=(0,x.Z)({strategy:n?"GRAPHQL":"LEGACY",query:e6,variables:{pinId:e},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetPinQuery?.data,useGetLegacyData:()=>{let{data:e}=(0,w.Z)(t);return e}}),r=(0,v.Z)(e5,l);return(0,z.jsx)(h.Suspense,{fallback:(0,z.jsx)(y.$j,{accessibilityLabel:a._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:r&&(0,z.jsx)(e3,{pinKey:r})})}function e4(){let e=(0,_.$B)(),{pinId:t}=(0,P.Z)(e.params.id||""),i=(0,k.Z)({name:"PinResource",options:{id:t,field_set_key:"detailed",fetch_visual_search_objects:!0}});return(0,z.jsx)(f.Z,{name:"RelatedProductsPage_RelatedProductsPageWrapper",children:(0,z.jsx)(h.Suspense,{fallback:(0,z.jsx)(T.Z,{}),children:(0,z.jsx)(e7,{pinId:t,relatedProductsDataRef:i})})})}},70982:(e,t,i)=>{i.d(t,{KF:()=>u,ZN:()=>s,fv:()=>d,kE:()=>p,yA:()=>o});var a=i(216167),n=i(372085),l=i(386129);function r(e,t,i,n){return a.Z.create("UserFollowResource",{user_id:e,invite_code:n||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:i})}function s(e,t=null,i,a){return n=>{r(e,t,i,a).callCreate().catch(()=>n((0,l.P_)(e,!1))),n((0,l.P_)(e,!0))}}function o(e,t=null,i,a){return async n=>{n((0,l.P_)(e,!0)),await r(e,t,i,a).callCreate().catch(t=>{throw n((0,l.P_)(e,!1)),t})}}function d(e,t=null,i){return a=>{r(e,t,i).callDelete().catch(()=>a((0,l.P_)(e,!0))),a((0,l.P_)(e,!1))}}function u(e,t=null,i){return async a=>{a((0,l.P_)(e,!1)),await r(e,t,i).callDelete().catch(t=>{throw a((0,l.P_)(e,!0)),t})}}let c=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),p=e=>t=>{e.length>0&&((0,n.Z)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e.join(",")}}).catch(()=>t(c(e,!1))),t(c(e,!0)))}},125768:(e,t,i)=>{i.d(t,{Z:()=>y});var a=i(545007),n=i(616550),l=i(883119),r=i(224796),s=i(587703),o=i(525364),d=i(696534),u=i(140017),c=i(741983),p=i(731714),m=i(217058),g=i(623409),h=i(554786),_=i(785893);function y({alignIconLeft:e,bgColor:t,color:i,disableRedirect:y=!1,fallbackUrl:f,icon:v="arrow-back",onTouch:x,padding:b,placement:S,shouldUseFallbackUrl:w,size:k="lg",viewParameter:P,viewType:T,isVisualSearch:E}){let I=(0,u.ZP)(),F=(0,n.k6)(),C=(0,n.TH)(),A=(0,h.HG)(),R=(0,a.v9)(e=>e.session.isAuthenticated),j=(0,s.Z)(),O=(0,g.Z)(),L=(0,d.vs)(),{viewType:D,viewParameter:N}=(0,o.SU)(),[K,M]=T?[T,P]:[D,N],Z=()=>C.search&&C.search.includes("?nativeShouldDismiss=true"),z=()=>{let e=p.ZP.getItem(r.pm);C.key||"/ideas"!==f?(0,m.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,m.My)("pinner_conversion.back_button.no_history"),(0,m.My)(`web_back_button_click.${String(S)}.is_auth_${String(R)}`),O({action:"click",item:"back-button"}),K&&j({view_type:K,view_parameter:M,element:34,event_type:102}),x&&x(),y||((!C.key||C.state&&"redirect"===C.state.referrer||w)&&f?F.push(f):C.pathname.includes("/password/reset/")&&Z()?F.push("/login/?dismissWebview=true"):F.goBack())},U=L?d.t4:"white",G=(0,c.am)(C)||E||"white"===i;return(0,_.jsx)(l.xu,{"data-test-id":"back-button",children:e?(0,_.jsx)(l.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===v?-1:-2,width:48,children:(0,_.jsx)(l.hU,{accessibilityLabel:I._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:v,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"gray":i,onClick:z,padding:"auto"!==b?b:2,size:k})}):(0,_.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:A||G?"":U,width:L&&!G?"fit-content":""}},rounding:"circle",children:(0,_.jsx)(l.hU,{accessibilityLabel:I._('Back', 'navigation button', 'navigation button'),bgColor:t||A?t:"transparent",icon:v,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"gray":i,onClick:z,padding:"auto"!==b?b:2,size:k})})})}},490972:(e,t,i)=>{i.d(t,{Z:()=>l});var a=i(883119),n=i(785893);function l({children:e}){return(0,n.jsx)(a.xu,{paddingY:4,children:e})}},597553:(e,t,i)=>{i.d(t,{VF:()=>n,pG:()=>a,vc:()=>l});let a=348,n=7,l=4},155087:(e,t,i)=>{i.d(t,{Z:()=>u});var a=i(883119),n=i(454514),l=i(140017),r=i(757640),s=i(554786),o=i(785893);function d({ideaPinImages:e}){let t=e.map((e,t)=>(0,o.jsx)(a.xu,{borderStyle:"sm",color:"default",dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:t}},height:48,overflow:"hidden",rounding:2,width:28,children:(0,o.jsx)(a.Ee,{alt:"",color:"#696969",fit:"cover",naturalHeight:e?.height??1,naturalWidth:e?.width??1,src:e?.url??""})},t));return(0,o.jsx)(a.kC,{justifyContent:"center",children:(0,o.jsx)(a.kC,{justifyContent:"start",width:{1:28,2:40,3:48}[e.length],children:t})})}function u({handleHide:e,text:t,userId:i,href:u,imageUrl:c}){let p=(0,l.ZP)(),m=(0,s.HG)(),g=(0,r.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:i}}),h=Array.isArray(t)?t.join(" "):t;if(0===(g.data||[]).length)return(0,o.jsx)(n.ZP,{duration:5e3,href:u,onHide:e,text:h,thumbnail:c?{image:(0,o.jsx)(a.Ee,{alt:p._('Image of who you followed', 'userFollowingToast.thumbnail.userImage', 'Profile thumbnail of the user you followed'),fit:"cover",naturalHeight:1,naturalWidth:1,src:c})}:void 0});let _=(g.data||[]).slice(0,3).map(e=>e.images?.[m?"236x":"170x"]),y=(0,o.jsx)(d,{ideaPinImages:_});return(0,o.jsx)(n.ZP,{_dangerouslySetThumbnail:y,duration:5e3,href:u,onHide:e,text:h})}},706196:(e,t,i)=>{function a(e){let[t,i]=e.split(/\/(.*)+/);return{filepath:i||"",site:t||""}}function n(e,t){return t?`${e||""}/${t}`:`/${e||""}`}i.d(t,{ac:()=>a,ke:()=>n})},84768:(e,t,i)=>{i.d(t,{MM:()=>r,uo:()=>s,wH:()=>l});var a=i(342513),n=i(706196);let{Provider:l,useHook:r}=(0,a.Z)("HandlerId");function s(){let e=r();return(0,n.ac)(e).site}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/47412-b2b572810873a9f5.mjs.map