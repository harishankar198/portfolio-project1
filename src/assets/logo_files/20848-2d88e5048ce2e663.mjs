"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[20848],{74916:(e,t,i)=>{i.d(t,{Z:()=>y});var s=i(401429),r=i(883119),n=i(213377),l=i(140017),o=i(406893),a=i(887582),u=i(862249),d=i(785893);let c=(n.yF+n.lX)*n.yc-n.lX,h=Array.from(Array(n.g5-n.yc).keys()).reduce((e,t)=>{let i=t+n.yc,s=(n.yF+n.lX)*i-n.lX;return e+(0,n.KN)(n.yF,i,i,`.banner-content {
          width: ${s}px;
          min-width: ${s}px;
        }`,n.lX)},`.banner-content {
      width: ${c}px;
      min-width: ${c}px;
  }`);function m(e){let t=(0,l.ZP)(),{displayData:{backgroundColorNarrow:i,backgroundColorWide:s,backgroundImageNarrow:n,backgroundImageWide:c,canClose:m,completeButtonText:p,coverImage:x,dismissButtonText:y,iconImage:f,layoutNarrow:g,layoutWide:v,links:_=[],linkTitles:w=[],message:b,onCompleteRedirectUrl:j,onDismissRedirectUrl:S,textColorNarrow:C,textColorWide:T,titleText:E,external:k},onComplete:L,onDismiss:I}=e,{windowWidth:A}=(0,a.Z)(),D=A<=480,Z=D?g:v,P=!D&&3!==Z,O=D?i:s,z=D?C:T,{altText:$,uri:B}=(D?n:c)||{},{altText:W,uri:F}=x||{},{altText:M,uri:N}=f||{},U=D&&2===Z||!D&&2===Z,H=D?"96px":"48px",R=D&&3===Z,K=p&&!j&&(0,d.jsx)(r.zx,{color:"white",onClick:({event:e})=>{L?.(e)},text:p}),V=(0,u.Z)({url:j}),X=p&&j&&(0,d.jsx)(r.ZP,{color:"white",href:j,onClick:({event:e})=>{L?.(e)},rel:V?"nofollow":"none",size:"lg",target:k?"blank":void 0,text:p},"naglink"),G=(0,u.Z)({url:S}),J=y&&S&&(0,d.jsx)(r.ZP,{color:"white",href:S,onClick:({event:e})=>{I?.(e)},rel:G?"nofollow":"none",size:"lg",target:k?"blank":void 0,text:y},"naglink"),Y=y&&!S&&(0,d.jsx)(r.zx,{color:"white",onClick:({event:e})=>{I?.(e)},size:"lg",text:y}),Q=m&&(0,d.jsx)(r.hU,{accessibilityLabel:t._('Close', 'accessibility close label', 'accessibility close label'),bgColor:"lightGray",icon:"cancel",iconColor:"gray",onClick:({event:e})=>{I?.(e)},size:"md"}),q=_.reduce((e,t,i)=>{let s=t.startsWith("https://")||t.startsWith("http://")?'rel="noreferrer noopener" target="_blank"':"",r=`<a href="${t}" ${s}>${w[i]}</a>`;return e.replace(`{${i}}`,r)},b),ee={backgroundColor:O,backgroundImage:!B||U||R?void 0:`url(${B})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return(0,d.jsxs)(r.xu,{direction:P?"row":"column",display:"flex",marginBottom:5,marginEnd:2,marginStart:2,marginTop:2,children:[(0,d.jsx)(o.Z,{unsafeCSS:h}),(0,d.jsx)("div",{className:"banner-content",style:{borderRadius:"16px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",margin:"0 auto"},children:(0,d.jsxs)(r.zd,{rounding:4,width:"100%",children:[R&&F&&(0,d.jsx)(r.kC,{alignItems:"start",height:128,justifyContent:"center",width:"100%",children:(0,d.jsx)(r.Ee,{alt:W||"cover image",fit:"cover",naturalHeight:1,naturalWidth:3,src:F})}),(0,d.jsxs)(r.xu,{alignItems:"center","aria-label":$,dangerouslySetInlineStyle:{__style:ee},direction:P?"row":"column",display:"flex",justifyContent:"between",marginTop:R?-2:0,padding:6,children:[(0,d.jsxs)(r.kC,{alignItems:"center",direction:P?"row":"column",justifyContent:"between",maxWidth:P?void 0:"560px",children:[U&&N&&(0,d.jsx)(r.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginBottom:P?0:6,marginEnd:P?4:0,children:(0,d.jsx)(r.xu,{height:H,width:H,children:(0,d.jsx)(r.zd,{rounding:P?4:6,children:(0,d.jsx)(r.Ee,{alt:M||"icon",naturalHeight:1,naturalWidth:1,src:N})})})}),!P&&E&&(0,d.jsx)(r.xv,{align:"center",weight:"bold",children:(0,d.jsx)("div",{className:"banner-title",style:{color:z,fontSize:"28px",marginBottom:"8px"},children:E})}),q&&(0,d.jsxs)(r.xv,{align:P?"start":"center",overflow:"normal",children:[(0,d.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                        .banner-text a {
                          color: ${z||""};
                          font-weight: bold;
                        }`}}),(0,d.jsx)("div",{className:"banner-text",dangerouslySetInnerHTML:{__html:q},style:{color:z}})]})]}),(0,d.jsx)(r.xu,{marginBottom:P?0:-1,marginStart:P?4:0,marginTop:P?0:4,children:(0,d.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",wrap:!P,children:[Y||J,K||X,Q]})})]})]})})]})}var p=i(256683),x=i(325362);let y=({placementId:e})=>(0,d.jsx)(s.Z,{placementId:e,predicate:e=>e.display_data?.component_type===1,children:({complete:e,dismiss:t,experience:{display_data:i}})=>{let s=(0,p.Z)(x.Z)(i);return(0,d.jsx)(m,{displayData:s,onComplete:()=>e(),onDismiss:t})}})},368885:(e,t,i)=>{i.d(t,{Z:()=>_});var s=i(667294),r=i(401429),n=i(883119),l=i(930837),o=i(140017),a=i(862249),u=i(785893);function d(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends s.Component{constructor(...e){super(...e),d(this,"state",{surveyLoaded:!1}),d(this,"loadSurvey",()=>{this.setState({surveyLoaded:!0}),this.props.view?.()}),d(this,"handleDismiss",()=>{this.props.dismiss(),this.setState({surveyLoaded:!1})}),d(this,"handleComplete",()=>{this.props.complete(),this.setState({surveyLoaded:!1})})}componentDidMount(){let{displayData:{delay:e}}=this.props;this.surveyTimer=window.setTimeout(this.loadSurvey,e)}componentWillUnmount(){clearTimeout(this.surveyTimer)}render(){if(!this.state.surveyLoaded)return null;let{displayData:{buttons:e,detailed_text:t,title_text:i}}=this.props;return(0,u.jsx)(l.ZP,{accessibilityModalLabel:this.props.i18n._('Would you mind taking a survey?', 'User eval survey', 'User eval survey'),footer:(0,u.jsx)(n.kC,{alignItems:"stretch",justifyContent:"end",children:e.map(e=>{if(!e.uri)return(0,u.jsx)(n.xu,{marginStart:1,children:(0,u.jsx)(n.zx,{fullWidth:!0,onClick:this.handleDismiss,text:e.text})},e.text);{let t=e.uri,i=(0,a.Z)({url:t});return(0,u.jsx)(n.xu,{marginStart:1,children:(0,u.jsx)(n.ZP,{color:"red",fullWidth:!0,href:t,onClick:this.handleComplete,rel:i?"nofollow":"none",target:"blank",text:e.text})},e.text)}})}),heading:i,onDismiss:this.handleDismiss,size:"sm",children:(0,u.jsx)(n.xu,{padding:3,children:(0,u.jsx)(n.xv,{children:t})})})}}function h(e){let t=(0,o.ZP)();return(0,u.jsx)(c,{...e,i18n:t})}var m=i(616550),p=i(340523);function x(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class y extends s.Component{constructor(...e){super(...e),x(this,"isOnClose",this.props.onCloseEnabled&&2===this.props.actionTrigger),x(this,"state",{surveyAccepted:!1,surveyLoaded:!1,surveyLoadFailed:!1,showSurveyOnClose:this.isOnClose}),x(this,"loadSurvey",(e=!0)=>{let{onView:t}=this.props;e&&t(),this.setState({surveyLoaded:!0})}),x(this,"processIFrameMessage",e=>{let{presentationDelay:t=5e3,onComplete:i,surveyLink:s,onCloseEnabled:r}=this.props,n=e.origin||e.originalEvent.origin;s.startsWith(n)&&("surveyFinished"===e.data?i():"surveyLoaded"===e.data&&(window.clearTimeout(this.loadSurveyFailureTimeout),this.isOnClose&&this.showSurveyOnLeavingPage(),r?this.actionTriggerHandler():this.loadSurveyTimeout=window.setTimeout(this.loadSurvey,t)))}),x(this,"handleShowSurvey",()=>{this.setState({surveyAccepted:!0})})}componentDidMount(){window.addEventListener("message",this.processIFrameMessage),this.loadSurveyFailureTimeout=window.setTimeout(()=>{this.state.surveyLoaded||(window.clearTimeout(this.loadSurveyTimeout),this.setState({surveyLoadFailed:!0}))},15e3)}componentWillUnmount(){window.removeEventListener("message",this.processIFrameMessage),window.clearTimeout(this.loadSurveyTimeout),window.clearTimeout(this.loadSurveyFailureTimeout),this.isOnClose&&this.props.unblock()}actionTriggerHandler(){let{actionTrigger:e,presentationDelay:t=5e3}=this.props;switch(e){case 1:this.loadSurvey();break;case 2:this.loadSurvey(!1);break;default:this.loadSurveyTimeout=window.setTimeout(this.loadSurvey,t)}}showSurveyOnLeavingPage(){let{onView:e,block:t}=this.props;t(()=>{e(),this.setState({showSurveyOnClose:!1})})}render(){let{surveyAccepted:e,surveyLoadFailed:t,surveyLoaded:i,showSurveyOnClose:s}=this.state;if(t)return null;let{acceptButtonText:r,bodyText:l,declineButtonText:o,onDismiss:a,subtitleText:d,surveyLink:c,titleText:h}=this.props,m=(0,u.jsx)("iframe",{"data-test-id":"anket-iframe",src:c,style:e?{border:0,minHeight:810,paddingBottom:4,width:"100%"}:{display:"none"},title:this.props.i18n._('Pinterest Survey', 'Accessible label for survey frame', 'Accessible label for survey frame')});return i&&!s?(0,u.jsx)(n.xu,{position:"absolute",zIndex:new n.Ry(1e3),children:(0,u.jsxs)(n.u_,{accessibilityModalLabel:this.props.i18n._('Have a few minutes to take a survey?', 'User evaluation survey', 'User evaluation survey'),footer:!e&&(0,u.jsxs)(n.xu,{display:"flex",justifyContent:"end",paddingX:1,children:[(0,u.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{padding:"6px 8px"}},children:(0,u.jsx)(n.zx,{fullWidth:!0,onClick:()=>{this.setState({surveyAccepted:!1}),a()},text:o})}),(0,u.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{padding:"6px 8px"}},children:(0,u.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:this.handleShowSurvey,text:r})})]}),heading:e?"":h,onDismiss:a,padding:"none",role:"alertdialog",size:e?"lg":"md",children:[(0,u.jsx)(n.xu,{children:m}),!e&&(0,u.jsxs)(n.xu,{padding:3,children:[(0,u.jsx)(n.xv,{children:d}),(0,u.jsx)(n.xv,{children:l})]})]})}):m}}let f=function(e){let t=(0,o.ZP)(),{checkExperiment:i}=(0,p.F)(),r=(0,m.k6)(),[n,l]=(0,s.useState)(null),a=(0,s.useRef)(null);return(0,u.jsx)(y,{...e,block:e=>{a.current=r.block((t,i)=>(l({location:t,action:i}),e(),!1))},i18n:t,onCloseEnabled:i("discovery_measurements_on_close_survey").anyEnabled,unblock:()=>{if(a&&a.current?.(),n){let{location:e,action:t}=n;"PUSH"===t?r.push(`${e.pathname}${e.search}`):"POP"===t&&r.goBack()}}})},g=e=>{let{complete:t,dismiss:i,view:s,displayData:r}=e,{anket:n,buttons:l,delay:o,detailed_text:a,subtitle_text:d,title_text:c,action_trigger:m=3}=r,[p,x]=l;return n?(0,u.jsx)(f,{acceptButtonText:x.text,actionTrigger:m,bodyText:a,declineButtonText:p.text,onComplete:t,onDismiss:i,onView:s,presentationDelay:o,subtitleText:d,surveyLink:x.uri,titleText:c}):(0,u.jsx)(h,{complete:t,dismiss:i,displayData:r,view:s})},v=e=>{let{experienceId:t,displayData:i}=e,{delay:r=0}=i,n={...i,delay:0},l={...e,displayData:{...n}},o=(0,s.useRef)(),[a,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=["/pin-builder","/idea-pin-builder"],t=e=>window.location.pathname.includes(e),i=()=>e.some(t),s=()=>{i()?o.current=setTimeout(()=>s(),3e3):d(!0)};return o.current=setTimeout(()=>s(),r),()=>{clearTimeout(o.current)}},[t,r]),a?(0,u.jsx)(g,{...l}):null};function _(e){let{placementId:t,experience:i,targeting:s,eligibleIds:n}=e;return(0,u.jsx)(r.Z,{disableAutoView:!0,eligibleIds:n||[],eligibleTypes:[5],experience:i,placementId:t,targeting:s,children:({complete:e,dismiss:i,view:s,experience:r})=>{let n=r.display_data,l=r.experience_id;return 1000421===t?(0,u.jsx)(v,{complete:e,dismiss:i,displayData:n,experienceId:l,view:s}):(0,u.jsx)(g,{complete:e,dismiss:i,displayData:n,view:s})}})}},810961:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(667294),r=i(73006),n=i(718463),l=i(368885),o=i(321329),a=i(839391),u=i(785893);let d=({placementId:e})=>{let{experienceForPlacement:t}=(0,o.Z)(e),{unmountPlacement:i,registerAfterActionPlacement:d}=(0,a.Z)();return(0,s.useEffect)(()=>(d(e),()=>{i(e)}),[e,i,d]),(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(n.Z,{experience:t}),(0,u.jsx)(l.Z,{experience:t}),(0,u.jsx)(r.Z,{experience:t})]})}},82531:(e,t,i)=>{i.d(t,{Z:()=>a});var s=i(667294),r=i(810961),n=i(190971),l=i(28449),o=i(785893);let a=({placementId:e})=>{let t=(0,n.c)(),i=(0,l.Z)();return(0,s.useEffect)(()=>{let e=e=>{let{clickthroughProperties:i,offsiteTimedPair:s}=e;(i?.aux_data?.time_to_offsite??5e8)<5e8&&t("Clickthrough",{is_promoted:i?.aux_data?.is_promoted,pin_id:i?.object_id_str,clickthrough_duration_ns:s?.duration})};return e&&i?.onOffsiteEnd(e),()=>{e&&i?.removeOnOffsiteEnd(e)}},[t,i]),(0,o.jsx)(r.Z,{placementId:e})}},887582:(e,t,i)=>{i.d(t,{Z:()=>s});function s(){let e=800,t=400;return"undefined"!=typeof window&&(e=window.innerHeight,t=window.innerWidth),{windowHeight:e,windowWidth:t}}},493538:(e,t,i)=>{i.d(t,{Z:()=>a});var s=i(760890),r=i(667294),n=i(107860),l=i(906623),o=i(438555);function a({children:e,isAtEndOfFeed:t,pinData:i,itemCount:a,includeBackgroundImages:u=!1,includeVideos:d=!1,includeSections:c=!1,isPlaceholderGrid:h}){return o.Z()?.isAuthenticated||(c=!0),(0,s.Z)({pinData:i,isAtEndOfFeed:t,includeBackgroundImages:u,includeVideos:d,includeSections:c,isPlaceholderGrid:h}),!function(e){let t=(0,l.E)(),i=(0,r.useRef)(null);(0,r.useEffect)(()=>{e!==i.current&&(i.current=e,t&&(0,n.ZP)(n.at))},[!!t,e])}(a),e}},760890:(e,t,i)=>{i.d(t,{Z:()=>g,v:()=>m});var s=i(667294),r=i(685679),n=i(608029),l=i(367180),o=i(297329),a=i(107860),u=i(906623),d=i(279600),c=i(748058);let h=(0,n.XV)("GridProfiler"),m=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,l.VZ)(),p=e=>"LAYOUT"===e.status&&500||"TIMING"===e.status&&100||null,x=(e,t)=>{if(!t){let t=(0,l.LM)();if(t===e)return h("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,l.F9)())return h("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}},y=(e,t)=>{let i=0,s=0,r=0,n=0,l=0;return e=e.filter(e=>"pin"===e.type),t.forEach((t,o)=>{let a;let u=t.fileName.split(".")[0];a=e[o],u!==a?.image_signature&&(a=e.find(e=>u===e?.image_signature)),void 0===a?l+=1:a.is_promoted||a.recommendation_reason?.reason==="PROMOTED_PIN"||a?.promoter?.length?r+=1:null!==a.story_pin_data_id&&void 0!==a.story_pin_data_id?i+=1:a?.videos?.video_list?s+=1:n+=1}),{storyPinCount:i,videoCount:s,adCount:r,imageCount:n,unknownCount:l}},f=(e,t)=>{let i=()=>{window.removeEventListener(e,i),t()};return window.addEventListener(e,i),()=>window.removeEventListener(e,i)};function g({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:i,includeVideos:m=!1,includeSections:g,isPlaceholderGrid:v}){let _=(0,u.E)(),w=_?.getId(),b=_?.setVisuallyCompleteResult,[j,S]=(0,s.useState)({status:"DISABLED"});(0,s.useEffect)(()=>{b?S({status:"LAYOUT",failedCount:0,numOfItemsChecked:0}):S({status:"DISABLED"})},[w,b]),(0,s.useEffect)(()=>{if("DISABLED"!==j.status&&(0,a.ZP)(`GridVisuallyCompleteProfiler_${j.status}`),h("new status",j),"LAYOUT"===j.status){let e=f("scroll",()=>{(0,a.ZP)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[j.status]),(0,c.Z)(()=>{if(!_||!b)return;let{abort:s,getMetricId:a}=_,u=a(),c=(0,l.cQ)(i,m,g);if(v&&!c.length){h("bypassing PWT run due to skeleton pin grid");return}switch(j.status){case"LAYOUT":{let t=x(j.numOfItemsChecked,e);t.complete?S({status:"TIMING",failedCount:0,pinElements:c}):500*j.failedCount>6e4?((0,o.A9)(`images.${(0,r.KJ)(u)}.visuallyComplete.maxLayoutAttempt`),s("visuallyComplete_layoutTimeout"),S({status:"DISABLED"})):S({...j,failedCount:j.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,d.Cg)(),i=j.pinElements.length,l=[],a=0,c=0,m=0;if(j.pinElements.forEach(({element:t,fileName:i})=>{let s=e.find(e=>e.name.endsWith(i));s?s.responseEnd?(l.push(s),(0,n.v5)(t,"green")):(m+=1,(0,n.v5)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(c+=1,(0,n.v5)(t,"red")):(a+=1,(0,n.v5)(t,"greenyellow"))}),a||m)100*j.failedCount>6e4?((0,o.A9)(`images.${(0,r.KJ)(u)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:i,incompleteCount:a,noTimingCount:c,noTimingResponseEndCount:m}}),s("visuallyComplete_timingTimeout"),S({status:"DISABLED"})):S({...j,failedCount:j.failedCount+1});else{if(h(`All ${l.length} images are fetched`),t&&t.length){let e=y(t,j.pinElements);Object.entries(e).forEach(([e,t])=>{_.addBinaryAnnotation(e,t,"I16")}),(0,o.A9)(`${(0,r.KJ)(u)}.pinTypes`,{tags:e})}b({imageTimings:l}),S({status:"DISABLED"}),(0,o.A9)(`images.${(0,r.KJ)(u)}.visuallyComplete.complete`,{tags:{totalImageCount:i,noTimingCount:c}})}}}},p(j))}},748058:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(667294);let r=(e,t)=>{let i=(0,s.useRef)(()=>{});(0,s.useEffect)(()=>{i.current=e},[e]),(0,s.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>i.current(),t);return()=>clearInterval(e)},[t])}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/20848-2d88e5048ce2e663.mjs.map